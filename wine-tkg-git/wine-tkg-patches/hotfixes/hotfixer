#!/bin/bash

if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 0c249e6125fc9dc6ee86b4ef6ae0d9fa2fc6291b HEAD ); then
  if [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ]; then
    warning "HALP! We may have some hotfixes for your current tree!"
    read -rp "Do you want to apply them all - if available - with no further prompt?"$'\n> Y/n : ' _hotfixansw;
    if [ "$_hotfixansw" != "n" ] && [ "$_hotfixansw" != "N" ]; then
      _hotfixes_no_confirm="true"
    fi
  fi
fi

# Wine Destroyer - fd7992972b252ed262d33ef604e9e1235d2108c5
# https://bugs.winehq.org/show_bug.cgi?id=48971
# https://bugs.winehq.org/show_bug.cgi?id=49007
# https://bugs.winehq.org/show_bug.cgi?id=49025
# https://bugs.winehq.org/show_bug.cgi?id=49098
# https://bugs.winehq.org/show_bug.cgi?id=49123
# https://bugs.winehq.org/show_bug.cgi?id=49041
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor fd7992972b252ed262d33ef604e9e1235d2108c5 HEAD && ! git merge-base --is-ancestor 1f6423f778f7036a3875613e10b9c8c3b84584f0 HEAD ); then
  if [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ]; then
    warning "Hotfix: An upstream patchset (starting with fd79929) breaks a large amount of games in various ways (ex: WoW, Overwatch, Star Citizen, Path of Exile etc.). As a temporary fix, this patch reverts it on current HEAD."
    read -rp "Apply it?"$'\n> N/y : ' _hotfixansw_fd79;
  fi
  if [[ "$_hotfixansw_fd79" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ]; then
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor b7b1ad09629a6678383a5ae791a9507c9eb87be3 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5-6)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor d2b70aa57a77103107a2e620999181c518d14bda HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5-5)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 68e675d73db4fb90fff84c0e1f6de3b492061b5f HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5-4)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 6f4272ce3e74f2d30f45bf0d407cdc9264b813a9 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5-3)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 0a72ec1dacb59c72980c3133fddf316377349048 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5-2)
    else
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/fd799297/fd7992972b252ed262d33ef604e9e1235d2108c5)
    fi
  fi
fi

# Esync/Fsync killer - mainline reverts
# This reverts all breaking server and ntdll changes as well as a few related kernel32 and kernelbase patches. Some patches were backported and are applied below.
if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 0c249e6125fc9dc6ee86b4ef6ae0d9fa2fc6291b HEAD ); then

  if ( [ "$_staging_esync" = "true" ] || [ "$_use_esync" = "true" ] || [ "$_use_fsync" = "true" ] || [ "$_large_address_aware" = "true" ] ) || ( [ "$_use_staging" = "false" ] && [ "$_use_esync" = "false" ] ) && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 01150d7f8d27ad5efdb824da938c4a9fa562a036 HEAD ); then
    if [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixansw_fd79" != "y" ] && [ "$_hotfixes_no_confirm" != "ignore" ]; then
      warning "Hotfix: Upstream commits 01150d7 to e854ea3 broke esync patchset (which has been disabled in staging as a result) leading to fsync getting broken as well."
      read -rp "Wanna bring back esync/fsync ?"$'\n> N/y : ' _hotfixansw;
    fi
    if [[ "$_hotfixansw" =~ [yY] ]] || [[ "$_hotfixansw_fd79" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ]; then

      _hotfix_mainlinereverts+=(1d8c2d28cb2ec313d1b5c1f762624be776a3dca7 01c17ca26027d055c5e983c8d76d60647bf7f24d 7fe55d2f7a66d60f3bf4890f59311920f1cc3608 746ece1a086f8fb721766fc8a4677606e722e4c2 ea8fa3174cba57df1120438724ddb8d41442c2ea 6f05b299bce211ef11dd5b046da4247e111cb91d 591cb80dea8c094539b4bc4ab640b00538c6e06a 54c31d5332a71d785db1b73cf3be41818adeab8a 892780a5d255136622f6c6402545cc85110be057 e909986e6ea5ecd49b2b847f321ad89b2ae4f6f1 ef2e281dc26c4eb4fb4bc09deb3b3dbf5f2e73fe d7e831c1123cca7785a6b8813f4991b42f9473e2 bed3b61b498af5339f53ecc23937ff3b81b196d1 a7066c66a646a828c16c33e67174ea1918053eac d3f09b862a3f6b19bbfeba7183c2ced06c030f72 1668db80abe44a833ab3de888d235be53a02f0dd 70c1d4fcaa846a8f69ef21d0a5b2c070c668b589 a40474fa18b1c3a8cd95719328420f7a8e6b7682 6decf1730509b9aa697e0fd4c6fdd5da63c9af37 f7edc328184c4755c81dec5372b3ae5ac7b8c5df fa409a91b0f13e478a43c9adc84d3c870bbae432 4e52f7ca865abf22c299501447805ab435399e27 419abd49a1f816e5a869dbf4cc81114cd516138b ec1ea1ea1b2469a526f4bbc38aab404b7a2b062c 7341f4ad1e771f32d8276734774bfa9ba352f259 c58802d0f46860572b7c42818cf8681119d4db7e cf20e80f8d962ab043cae2a46f1be583d0013214 c2e319ed20d3e0e5b263960edff237702896e1f8 2e74000537a947e29c6de9de53bbfb1549649f87 dc6f6e9ef3d6f9c99eb743d779174e5759f091e9 1b672d1013056d6a017605b8f8b7a8aca7ff16cd eca4d91cad48922f0ec881f79913e4b0162adbec 98dcd3a7ead292eee3cdd1825380ccbb8a69dbc9 633b244b1ae7928cafbfd25ef338e4918aac0d74 143c210360ab4b3232fc5cdbf5c5c56d8001ace4 53f7cb3c0888c852e0b4fdc9366c6ce53a54f433 627d31fcd9fa1e4657c781ca07ff25e437101820 859b526c81a2af841b5b7b28d06f3d782bccdab5 12cc863a4a5e31a01bf4f683d94a7e155feb23ea b2487c17eb60424e1cb4a74e4763f057ebbf7f39 1333aebe0b3d7a8654a9c573b3dc24d7aa31c1c9 a3583f05055b5093a3a8822b73fb24281ae62d27 aabd2b54b2c538b74d2eb1026c7afdf2f910f253 83b52b19b5324adf8782cb3b1fd23c9bbe86c8aa 627ae12d2de39695d244aead531a91d1a5fbf79d 91be31b28ad5ae4852d2cc3cc3bcfc3e2ee01895 7148521305b161129c43b806d83c9a46aa42cbca 6323e36f0f1b85180314027f84cb3c37140bcb70 d2aa17dceeee847541f210ce8e68f1724f0316d8 3a6da8defa65e6615e9f29e5c600e62cea0a9bd4 c2ffbe5d364d07971e0c893c6d52e5606dfbaef7 632676d071a936199d6d91d804f2e62321c870f7 7d48e0c564ef9a65608c01cc55657734f7d5004e 5c45ec90ffa8ee2f9472a9149258dd174309e203 3d51714ce4d40506f9935e17e635f6d35be3057e bbd4196814e9aa262112b338bfa976a575e64e65 4039c5ad47a999a771120091ca57d087b01ee382 87ea7698ab8c859f0b7e4f363339b0b15c31abd5 767fa07092cde0bbf3f08a8c728dced8cb28c748 905deff5da48c085bb4213d3c67ecf1cfae45564 36981ad03356caf01eb7e446765e1e9c023c0195 06cbf1992313f4a9ef090a4d01aaab42f74e8549 0c25f5ee466b181e9caa6b15257be1db8a66b602 f377ac1f2d0751c9d2d79e061b4e9c378a856bbe 1d2c29dfb0bac8915b8e2ea07ecf20a33ca89527 a90017845d2f65ecd8c1bd32c3019bcd2b13ecd1 a692d49039a584e28fa72689411f1ba71033abb9 886acfad379b653e4370e8172c5f7fae257b627c f79ca651aeff14a7f4e3443410a89441569ea080 2a91b0bead7e5c6d08e3a6b79a6feda242e66652 a729efb964bf193783d4090dcfe9864f877bb424 7d54f9a87f337276fb5c328872951e485cdc37af ab0a7d2a1b31160134d9205236fade162f0bc1dc 0a6e46e4367e10caa0b13156d89807c45a5bc3ca b09acd526d0093962131ff900445cc2dae1f33c4 ecc790ad479958d0c9a5af105463cfc3da3c3126 94ea4252cf3fd3613c8fe78b9af3f36609a3d8c2 ee38e167d1280777c92c757f60d1609bca9e105a f65340704f72d44ba64a6c7b430ca73076456086 8bfdc84a1994274e5d7ee44c4ee3892666f4cdc7 973b0e1dfcfb20fe5ac2713721a4844e3e3c0671 dcf3874e005f864a87205bb7da7ac4bda24a81b7 bd27af974a21085cd0dc78b37b715bbcc3cfab69 df794f342500f1b4bfd988f292302afa890354c1 e3ea5278357698e75b6cd51627c30e84e16845ca 2600ccf27f9dfb6eadbb21c92b75618ccbd26e01 ea038894a6aa4b034e151e4f2af42da36710e180 cb1594cf4ff9eef0a5b5d80dc7c47da9e27a5821 c46ab05e55860a6c2ea774495c9da8adff3eea00 5474c035e7dca04b0c9c2abba9d208c18e839b26 fa9f4a20f5305b7cbcfe3a644d39d4b759f89203 95e1de8215ce8b0ece486dcf8c713e98d5dd3a0f c9e1b789d285fc43c1d8142eb8b4f2fe969c6c45 45b8489ba5a1726cb9d0e163de41cb1c0ddaa23b da8e4d9cc98859d524924af11e1fe5ff00d43dc2 797f11612016205f78278f1e39f622e2f98d41b0 ce557472e799d2bab05e1c090111d751b68a4ffd cb5edb4b12eb4846df85de71b889959a96586720 b1f2b61be040cccaf6da6e6296bd38a24f05f55e ac36b8ff01be8e6e6c8f46096b434f7048097559 abcc75cbcf57513f07ab8c008f66a19f142c5a7b defcbc8b97e45d879deb366dc32a1c1c5f5fac8c e596f4047ba5cc08a8324756f04851e09e8f629b 0627fa9d9217c18278c8ea9c96740815b70d850f c955eee9e8ba92118f2192578128d4756030c7a4 e16018f621e93de37f5b85b29bafe44cfa6c1b3c 0167e195e962a427c247e3442abf6ea23fd36156 c4383013aab04ecaf2aaf969ec6158d28c0c7f02 a472ad191f3f518feb9e100a20cee835e3109561 209b968efc2336a72f5223f0c73ff46f11a2f1ba f0e13847779fe058b655c8ec1a20f61b431f7df2 459046561328735dfe75181ecd825410747c6451 b8ada902d12f628883c790cdef3bacf5853a7f81 54c1b0ac267abd0e52f23a60143999af2cd49b03 d70c8e464a56a17f5c0669ff668fb1070781faa6 d6da10f3fb97f412ccb1ea4a806b13be3a0475e2 0c2f556afe7b5fcc873c737512fae5b9c8c07624 9498f9625a7b4b704f10b1bb321685371b0c999f 02a764e702094572186e079f6d48946627336d03 f4d376ea07c3797d31ff918b3e93129655ef670e 559d502699a477c00944284bb9ef7677ce6b8f18 fde5967f725624c5ee4995dcbe22f262979c5c9c 0c631ebb2354334eaf309bc0765d3283654cf902 e5c0e8e296a114aeca41fcb67c73f55e1d37d002 7cec3dc28492f2d43d706cde9afa4fcbc4ae87c4 20e0fd6e991edf5c6b5c6c7c22632d16d346a690 48e88074cdd09513164f8669b270d13425f4584c 6a19b999f7877f5b0052c77d09a41635769ce441 9fff80d87655ae9f70094b34661abc2a399395be e055a3ee0503a62d1d0c1391b01471c13fad6bd3 8db14f4e18a3770b4ac3cfe6e1ddbe17dec342d7 2a573c6f4899e7ccdb0492ba5029c7f8506590e4 088b7c5814e8aee5676d0c999a2995533f21a4ed c2b089aae52c1d275098e1e8b87c0f9a5340b206 c6806e3f204413294bd16a7b93dc5893bc00fe83 8fb897a5718767bb86c734c8ea90245aeb7bee47 5f24f3012469f7056aa9b22765af1c0f11e1f6a2 c440926547a8c790badce1b9bcdfcea7183ed1a0 0e3edfd9422b811bc9b4c90110133fa342ae204e f3b8ccb2f79c9b4801493898a63a2520bc43afd4 fa1b0fcf6cde6e1f7f5c9782457eb8d7f7b9eff3 d0bea3d70207587f183bcad0e40cfeba8668c6fb 2379e3c18119ce258daad51c2d8212da7512013d d694928ec25071e87cf02422e5ee3a1acdad872f 6cf3561ff3df814e7450d63769620441e4ea1265 50e2c62a60cad6af121335b7746c33ebafbf1d0a ab9ded062fe39ba16ea42ed3e1b755975e025853 6946d78ed9e88536951357ae5574e251f0007006 8c5638aa5e7cfcd5b2844853e744702331a85a17 67f7d6872b4e970e212f1ac4a51f21a3b8d00548 965ebac6c19c72c511d61cc44958a3b944d5ddbf b9f1ec8c44ebe62b4005d4ea2cfd63f700ea8a17 d22e82196496cb6d7f26b984b95409678a76c602 3b3c8619c852513f57ce7388557c8451691fbe00 25692223f1cf1f451e4283a2d07a89d1dd7cd3eb 82c84548ebee6f2577f65e0a5df21fef898b6990 5c4d6cf8375b69f15df4e79b23a8c95c634b7421 d6c4efec1ab726b70a660b8a3195eb43003793b5 e8e1f1e634634a05aaed8e5d0fad9d72da499e02 810873eb7561e147dff871aa20315e930d1f01bb cd9f96c7ce868514c481b02412ca2db157022f61 79cb33e192be9b41d9d077564b0197b53c1a228c 26c715f85b490eda36fa06473a24218bda40a56e 05628e169db4c8aa4ad36953d07b13d71ff3a5e0 c840de2839f67793483bae633362b2daf00e3949 96dcee64307b63ed3c07d13832fee15c3dc21ff1 bdb2fe0cad3b34bb6c5b70926cc848f0b9e9e60f 7b79c8059dc61686fa3a9dfecdd9ebb34791b233 5e9b1a3c6752e953baeaa10c13f1ef887ddfb471 2e51f9aae37777762321f1e813a7e9c6050e02e2 c58a10c16395c30e7793cde1f748febe0432a6ad 16832064254bb4a72f6895ee159d68c36f5a972c bce9cdcc9812a1a22bd744c64309ba83b4eb4e89 1c84ac61e6674e2951691d97f27d75f667b00c97 18df4912f455e0fb09b232a409c5825a44ee8f2c 29334489795f0f3fbca52b65b7c5a002983a997b db8a75312d55480392a8bd9304339b5adba70de4 3ad1739bc85a69c3a2ee4df2ccc1d7b60b466e9c ba2924a64dee3d672230bc7bf7a60ec6b67c8ab9 60a8f050a5b438ea06898f09d081206977ebde9a 9c8dce215512ac42ed657ce0dd6681712a4c29c3 d8f7d5457355cd226f0490d849dcd7a34d5f82f0 4eb3ab95c75eb4eb33c01d22affdfd303590d87a 43f822bca27b983e6ecca11f4204348a38ba7147 54e117018cd4cc58c258da92686bfad13946bde2 0957f9302ca40bd85e092ed335d3fd10ab9bf4da 6bcc1b9225efe028319bbc64ce6b42a03e4d7ec7 ef57a8df8b53fcacf769a28bb9f4e77317ce7167 c47f64bd3e5ca6e10096dc9b39d3df2cc9be95a0 52f6a56a1aa450c893e19a0e63a90c60626d3dcf 158471d676e799d3d23a356b442ecc4afd2ade57 fc408f3d4376722dbe173495be10ef2ce34874d1 aecf53d0f745a65c15e0f1abbaf27af0d7c0a486 ef5af87f6cc951b29800bcaf97bc1d9c86283b4a c6909e52543b62dfcd5b183014e6eae27b69f3fc a33594a0483be2fe30d6cff8e523a9bb208b7240 da3bd4cb4a1c9644717547e0453ccd3498a3ceb9 c21a7500aecd3920db516efaecc051e2b34196dc cdfec11e42e59c497e9b1760f73b68283d568225 a9722145a86ce3392630d469308a9dd731e62e79 6456973f0a64d326bb54da4675310caffc2588f1 5ad25c293b6a7b5cd5dea43f29f6fa94d8302722 148d3aa461126ab6e77e36e33493f87d539cd6ec 9cc92365560f19c2fd2b9796f79aa75e02381bb1 a014f413d6719cce883cafe9f40ec0b6468de097 3541deb0c3a64d3474a96728d259907180fd7cf6 b67bbb732be82dedee93c88cf92c92c0540f3514 123a4a884f343f76d40b843740c3c4290d5eca71 2eed0cdb8f860d37f4efa631719a0a9ae4f721e1 c670df976c10e29e095dc0b0113669800b0dd0cb c73ae99ff49944e3f544dd901628538984f85c4c 2693e6662d73bd774edc5d018092b0318e49b1b1 3d31e52fe7bbfbfe28af6dd224bb7594bbcd9521 ca95afd37f6416b1972ef33a811939b37b405320 d6565b083251427e0b64efa279c314316aa20dee 3e115d244ed2e2018bfe4a7fa5a9ea7a37b2c8ea 3217abd7a57e2b6bc3d7eb6c3de3d570cd5b86f8 74192f7a56c319c1a9cadb67a3dd3305c965292d 7364a4b07536c10331e6049bc098ca9dba9554e6 67324a4284bbbea67510365a835dbc0a45409533 cc6c5f7823df717da2eeba4351348325ee91ba5e d36a1792259440ea88ab0a67271aa7c4e98da28a 6f5872cbc58d5a6e26f651baa27412b010943de7 2fd27f0a04a54136acc0cf138e1a6a6b7a47a1e0 af0ae9df1e704c054e4c7fdb2f5a4e2a4f2d55e8 666c5b6e20e3b9e1e34d10b88372406f494699f2 0cdb070b76fc90b61fe435594e524fb8f9123fff 73f55e234101739a456774a334e1d732b57afd0b 01d203eebf60a4f07be658e6a66d50909c90cf75 4d33a0410e40879ca405a1870cc53ff4da2cc7ba 0dd6f1ef35efa811989716b3dbe52b988bf34ad4 3cd3b775224a9b58cd803348402aa757660ae856 468af5bbb47b70630c2ecfefedce581558287ecf feb5229091df97a66c41faad04160d0741ae299d 1dd3051cca5cafe90ce44460731df61abb680b3b 820d703c3182de41a175f6dddf339b9f6147734f 24021931a88ed917bc2b52c0914c059c2d8d2f30 a26bb7b2ef50cf0d1360b35b093b7e4ef11aa6d0 129149d212e607ff2df8619085d57cb7d7fb09da 5d96c5aac883b343ddcfbe6f6b1b96ad6827a46b ab6056d6774310162ef268ca6af5e3ad2e556a4e 5ced4a705a544f9a91fd38669b3907559b3a575e 22628bcc1742273affa85cbafb0e494922f424f7 4935576d4a5cb13bc58eebfca1ca43bc43866ff9 53d956700adf17eb14e02292ee520cdcc8e7ba99 655ab7a84f1442ebc185a09acd06611cac1a3eb2 947fe11e02f0cb227f571a26625ef4cbddf93030 c4ae13e31264616757200cd97700724ffe37e602 d0946955ec21e4da57aaec92459f81f131b27a49 c487f21b6b95f1fda2f80920135e8481dc86e4a6 e9090e1c903578b30118ce9559c1824361abc6da ec02224941eedf16b8b043964519f6363b5ce21f 96e5ac876fd48c3692a2b89780e7bb40fe526798 5adb93c654aab78f26f40b83ebca39af0326ba6d 82acb284bda2fe655ce0ff51b18667f1c9311e30 a204ad557dd504391e13e1382278472cd86517f4 b211bd7b6449e3a67bb0ecf5c113981eefa0dbb4 b07cc3fe0c02ac9ea7be5263657f82a68c76e181 e58ef508a935e69f26c614063346d4ba67667cbe e151e4c8a12281306caee136edfa24cadeabde59 ed64fd72a7ab48f5f48e7dcbd4d666f851365993 a8ccb7fa04cae768214e649928e1ee10804f0c41 33be1cf598b0319855bf14ee88a0120636df6032 595f2846b2064a6ebeb0b02133e2d68851fb1c06 a9a08dbc3dd8b595888f6c6b066e6c8fd389771a 4826900a30a431faa8bcc9e3f0007f794d8d15bb 7ec069d85f5235db98e57291825b9d602ae47ed5 0c857e92cb424bd7189b76b4035926f1688ab1e9 3395ee3631fe7088d33d5fd53f0e788741157e6a cc9d69b20bda583142288b0cfb0ab472348a2b51 36ebdfc6b647aaaac1298a03269420fab5de5880 3885b32bc8995bbb171ffdc7af7d402df1b0534e f3322891420d4d7c5a1c506a25ef4f99d21b2f8e cd193e44a58f542a919e3c59a82c64e6d2393b76 4100c43576af4953f32b646fddb7987cd019d869 3038674eefd67681c187521d10a28f0460a2fd96 298fa4a7f0fb8f97923a2a86c6e42b6e060e062b 787df87badf606fe6589d17b9728dfe58cb524b5 4ba7c42370e6a1de17f3a5eb72c87950f9319425 7fe03dbf21196d40ad533f6acf2e216fb48540d6 5bbd8130adf9f4b0e6b45c5309484c2aaffcd8cd d99a454a6bead9aaa5c55705d4807b416d2855a3 2d91f7def15cb0df65fdb87c19e24a5a6c99839e 4e80f2ea5e350168933599ab7ad633254717e93c 72b97eeba0d934ed2c8607f45429664130dd8f5f 74deee7df0abd7e05b433f875e86e26d7e2f447f 61f3b3dcdf759537fe83b86837e2ef341a2c8b66 30e5250622f40037a58dd87517267dbab88c5df3 1c2b14a5240cdf18576552b1a81c6b7e17ff3a91 5b4b8774888b58ed424c46383d709c8e39345112 7b96e82fd569bc3b261be147abe49a822f14d4e0 4c45348f7808c3a1ea635e196402951f0008ab90 f51cd0a1b5383506c5b1a535f702acab42898d08 52e9baddbce3f6d8aa768379ec6d7e82b47545c6 74dc9aa33502ba89333ab4be3c7c1458015c1d56 00a0e2cd8c4df240371ddd22516e4e3544a142ce 9864f9c024ad6e45d2e4369dca7418bc9121d727 b23ef1d836bada90df71ce9730f68088e0124226 82e8fd97f6996a13ecdd0c827336e0681e2216a3 f9c89932595c874cf9eb6fc8d3244d89ff55bbf8 7d3503d83ece320ed023297e12d766e487383462 9e973954fdfd2f9e22545bb6311053c835861193 f7e4fd0cf8f5237614474a6e5dcdad24a6a1dcdd c2c330532e96cc0cf5ba30f784d195fea90a4366 1a9558cf9bda654950e389532b400023ecbd81c0 81a08cea79afccdf4daddda5936c05a30849f83a 85a33ff731bf82e229a2c6aa386d36fa4a90da65 541b06747ae4a64d0e39ed010b256b9326490701 c0ab7af1b0553e6177fad872d95e4195582e4d94 518d06404ad70aa9812a77d019a18fe79c16f831 26e04d52fe466e44eb5ca383c94c2920c5e294ec af47236499235349187c00a9be981a713fa5041c 2dbf14ee80583e7fa8da74cfaa85700cb82f4f70 c1c61bf2559509b33fc8bdd297032bc57e474229 13e81421b7f1c9cfe1d6a5a7738ac728c662788c 8aa370e9919f179feeece8dac9782f90f2e2b09c 3803997349efdd2860263d08bd9d71bc0702cd2c ff88ed8b0652e8fc202893c65258a012e650ebbe 2d544ff8a038ac20c278d0e8f2de4c5478ff6d95 2de4f12b33724af2f90607a0626d75e8fbf8e4da 2b40969c58a099f958c58909b666915991a42979 58f2326410dd5574e52ab3362b67ab345674c3b1 2b9a0550bcda166afdf852370397e1041c096f5f f4661f1b38c479bd08baee93d9ddb1f9e93c173d 01c05387ce56ad99bd0b629a41317d7058a82462 151b42953b49bc0417c53656b0040ef765a8cbef df8578da8ef4f6e9e480e1c49cd82ebdf8281d38 7ca68a86313e39d21cc92eac84a00841318143ae 21c99970f3c423e2b8b1f92b2b44c5dce7cc28bf e5bd1ba4ad4802c3f589fc91b8953205af52a978 eb293d7645eddbac8e94086a58d460b4407f4b58 029843176b11404a77384b40ca3e9a99226477fe 15684bd5aa557562072a749ab4782489fcd27546 8b5e0bdf8b9db3ab19bbabdb2ce591f5fc876ac7 3863b243fe5ef4e223a809e93a85e858952dd754 75e616d52b452d37cc93f492d47eba641f9741c1 aef321ec0f9b54cc07071e0757c57b73210f304c e703e2da39a411e1f0aaf6d5ff7a1fa36edb87cd b75ae8c31eba2a59e2b32bf8d456ca5756ac6e0d 4225ec994e64f365b0b093609a3343c0ae1987f0 65c37cee249984884af40d91aa14706d81e128bf 1581fb619b879b58a402bc64ad81bde265b926e8 a9639dd6053f1e7de915c29851cc1be45ed537d0 99a6ae5b863b220e72f01abc9ce3ab1c7be9d7f7 a8ddcf7dfe64b727a0c06d0a008a0ca5b227868c af1a328fa0da4df7a73688528e49a568dcea995e 482b64effd44a8f601d3327eed84ce6d61432cf3 4e5811637ad027d01cc5033f76b03e6e8cfdd287 0e7f6e0ed32ffe5fe09ae429037fc28dcbebe6ea a12e308ebaa226caaaa8e8c932bc2c7687914d21 bc3284f818f70d2de0bc76beaa69a3352f27fd34 41d1fd3229eaaa42f4057fbfa335e0e6d665233e 8c0c70dd0f0cccfe1e2c9706f4645e7fce13078c a729af0e9c0027e7f9686df7e3d85ec1ab3cfb37 aaea13a128b76fa0076b8852187c7d10e5eb5d68 9012096b47d8422a296734ecbedb226188e93501 47fe53172971cfd233b30b33cf0d710c6317279c 8ea62f2ed13865d866a38b80f24caca02ef72447 d2496e2d5c5ea4bde34659ba88cea52e8c27facb e40de801b5e757f13e5d699fa22368bf1939d444 6c7f389c5ee3a1e55835a1c25cfc4160e0f214ea 0e939eb969d3bd3caab3d5efea4778db07c00c87 5a151b060a08f36d9a667dec8d0e9fbdbe0851f2 7571fa87df453e404d8b6ca58e2da95340156849 97847eeee8aaaad9b141e14d4468838960ea3093 6844ff8a0bda7c0511c3c328f459cc4286bf3c5d 0b3db9dfa2877ff36c10f73b04e97af71ab2f845 8bd95a80f263a8df6873f8e3a8b10fdce4136fc4 057e7f19407f0291cb4240c23fc391263ba9faa8 32c618b7c5f5c1891de7833986ad95c9aeec69f9 601175822e9c61ce02e21f20c76daf1b760d6924 9aa885bf37c01df1e8f00852681806ec4c21b040 2c3719c7a9b370461d18c4422dd965dda80cb859 16ed88a95234d844fee9fc19053c5c7f618f92ba 3f562e0b919083bbb988474d50f70b9c5370e29d 3c9d10d756746ea21ec83f78de42ede871a0222a 8231dbf04961356a74bf026cfd3e359605ddc81e 898e121b2e1628e91ebe9dee1c1cf8f959f7cd4c d902c333066e57ba3587ffd72e6a2bf08f9319ca e24ba09f8f35b146de178e492c8071d1923bfa88 76037ffbeefc7b15b764b4d6079bb6c939176523 36663d9abd0fc085c1197429a78dfbe86c1dc56a 0ec191eb0fd161e3bbd9e92270282d3d81e2cf11 7ea9f9edeed417a241d607bac282d68bdf5abd36 5f0d268fffc741171fcf9006012c310128846de5 0267a04547770fe75147aa025e11045aca5c4ed9 7531091f33dcd0dc849cfb5df918e9a331f7a6b8 5b3842451ba6c7a37a24e0f16707d8a19020287d 13ea90d80f7275e1ad4f3fc3c1c75b68bdbefbb4 a4af2b2b70db96309172b226dc6163e90d565420 97b5ad7597bf2add39251d7379fc607bf1578478 22f4b6fcf5014b6d98188253636c116e50446c44 de1cb029f6e9bd6b8959695f5d0ae55188d9b723 25d4c50db3b2cd5113709b98adfd3de86b6e19ec 1721f0ff2759a0dfce166f20653058248f188521 77fbf3a9fde517ecb4d23e0bc121668206fec2f3 a686759f1d7aee67b5786b72e81a4e4fcf3f3c02 53e0bf2f9f0f9876ca89e4c9133d9d5265b3e9dd 4a7cd0f492affbc0eb347b97426b8c23f9a4f976 f332f2e4e28e9618e7b4a65e9352915cf9772e93 525e7078a83f568d10183327ab3fa6b82d08d41b 8f3bd63b52f03ff05e9d2a00a2e129a0b0092969 7f8224411c39242fe751524816b1349002066c72 cffd06ea67f34a8f6379c78330c40d55ba83223f 849d08b0aed1b256ac459347cb488ef3db5ce3f9 30596feb03098b392bd5078a1a2d390567681b3c 2a62242747aa17a1a4ad7443b0ace900f72682c9 6cff65900dd299f596636ca5449b0f99e825cf97 32eb41de8caaa9462406c859c8242df5a6ebf343 c6e0cb6c720c56541ebb45a6b4821d46f0300f36 e8f2c2464a3ce47e84be7786691ba35d25c7e6a8 2306efc3fae152586348a618fce3d8398a883924 f54c7205b6ac387ee394c8877245f0d0f3a3cc7a 36fc962f5c0f2fd33cfd09c816017655104c4201 7444aa42306cd0e091dd46efc2e0be3c7c61b2fa 3576258402f5e23ad059cf446eafef7fb2c10430 4faed406d428a2cec752c2aa1bda8449a1342057 00b4a51fcc325fe1a5f2d1dbc7b81dacf4686b4c 71090bdc2f5051f181c193ea410e6438b92c9c37 ae07938ba661dc0515673835878710a25c99eec8 447bce4117a58910690a0d2610ebcbdd49ae9127 81d1c79dcda0eea8fd35b2dcc6dfa3c3a17e2393 225be12999ef8d7e9c8a504d0d26254c9cace568 1e7378d80c20fc8f45a246fd043ef4e2911e94f5 1d65e474b1a5aa3ea60e6b14c7a49479b35cc7e1 43ce429234a568cca6d563e0464acc3cfbbdbd50 0451e44d957325e9de348b8701058e19ce47dc57 ac94d8890558bcb34d28ee7c2f276bf994faa8a5 09ff2436c4b1be1f379aec7e4f0b625c6dbc90e2 06c3e7e44cb40ac2e6e6c55029103d63f47f9e5f 57a222356cb675beec38268c2736628e0fb3d231 ccaaf6957f525f09ba485377a606ce322ab90792 c76dc32feffaeed260bf73499e43012b69bee1b4 76556bc5885b45f88ca436fb2f04cdf79bc29af0 d4052e0d709d7fddcb6a4adc10e98a8e65c8218e cd8971399e35a8feaa841025ab74857a85bf5678 5a6341d8c7cbd19308dead261ef67c5c1e5e4f0b 3d4be8e150bf37607b25dce0db2931384e5cadd7 dc8085142528305605ef4af621ba56f2aa75da65 26c078a2a64e515323bfbb4fcbdaf161150942ba 94ee27097228ac37f1576565c9f93f6186ff66a3 f804d1ac70f0f113ddd0295dcb83707776cdbd2f 9b7f14f1b49e838f5edc74296fd53b7215a8b52d 1e7e21534e6598782e77c38907573fa0e118e13b 13abe9e2bd58f636efa2149eee8172f37b5ddef3 4f3534fa6f0e4b7ec9e3d446b394afca612e21ba 7a71f98640bf8fa402d6b0c3ec30b40818710ee7 2a08e0e29025f335acd77f7d899afa7f45240b2b 9014dae8fb7b78cdd8a200278a1e2a5caccd533a 93fa2e0ab82a9506fb71bf0f536fa521f58ea88c f7895ef25a4cb2115ffbe04d28b87bcb6ee3c0b7 734a7120b6ca73ac4286fc8efaddf74534b7a513 d29c33a35c56f9a348ca8a8de01b7fe7eb4c4ef4 1d3e3a1c8d08c75e88734ec00b5a2b412e8d6ca3 2b76b9f234eb5d4753337d8b080f2c050daae3ff 0720c6cfd0b8c863fd22053c2ca750fd982d49d2 69f1b12a30bbf28e750206f0ec1ab2c6320abcbd 2c903e9e9bb1254a9fbed60767b56668e675f64e 647c54e539c6dcc76c6289bad0fc387274d999eb 31800a1414a33995eba7c89d65a93d69beee47b3 f4e55565470938d31e21f4a35aa14e5a950f81c8 ed8358393413d52096c56e96b44ee73f15053f91 a09a268faeb29fb6cffd6e422843659793f09ced 53f17314aa97d4aba8d37d76ae878cbae20818bf bd54f39766e53f92909bc208e5746497c0dc5d69 e7550069ded02c1f8503a15e155127e1e2c26f6a fa2b372ec02d3755ce892612750238f41b39ad85 504d6eaa9a0642e6c71aa320cb5ac1e88dc44a01 78831ae9d044ffb824e72cb8952f3eb25140c7c9 b7e51a1653320d06a9c04f53d0d9e7eda577c31b 3f8d60e2ac5997766f19107aef23e351c7d68a03 305da71c7d8098bf2d2a07584a25be2e5fcc2b91 c37c9bf65a6f6dfd9708f6654227a953504dc158 1f5a45e63ecff2f83eb927e253007bd75fb36c05 ad1f09d57424b26bcf463dd45b5b0acb5bd97029 fef78c4e10422319736f290e44493838e4257a04 e7c9a0e1511641961a69babe2ab7aca75c636672 b6b2667482a14e4cd76da48940ead142ce207b2e 3609406308110f93f11c6045da5734f038ef727c 7ae370a5491b58eeec03961b09dcf5ae5e53e411 f6fb372a045256d84d6e18d4757b9f59e209cf0e f8fa6fd68608b53def2c34a489b5af2416f47cd7 5f6bb63800c14a46a4124c5a5e42094cae3a38fc 300a01f467e84bb69bf6387e52545ddbc9c456dc 44052219aa0e6412a0f595f830c0cdf6e82ea70c 7a31d401391c9c66173a599cadbbb6946f607927 eee92591bcf4eb7e1f0d91e24c47b5021a9c81fe 06c09fca3127fce9d3a3d1b4714173404ee58629 8e5c11b964e844696c7f5882d3b8dd7ff70a7869 94ca95a6d444e8cd1592bd41f09cba2e1ae49902 d775b9fd93ecfbbd12945f1e167e4bb381612c69 57f419993eb8088ef210e8a56b07acf63509b159 15b3584603205b93e6e6a0bace6159438ce22ffb 28e443d9e2a3bfea936b4f6f97bf78f6ccf6a91a 9a7c56d9e7f8e49dc98dace53b10d0753f0e27a7 8e3b5183cc79b99ac74e2cb3f665f8e46a076495 29d5c6c476faa00529fe765150d014607da48f27 928fffee8dac4a9555bbbc141d9f29483422eee1 b37371bf20be58ee7bd0b63dbac15b474873bc86 d18b5669952bf1639be78fd699310231d4de0259 a865a4f61d413d85d6ae4e57d3c14c0657d3a598 e3b059b5bad4b7ff23459a6384c866e3da1bdee1 0bf52b09f2913b2f718fb32ccd0b1300bdada679 9f3e9d464da8806acd185783f4d2350dd675fd2e 98bee7881a30eb01fb3d633f008957919a4aa71b db886f09236759141a95183be83c666cac5f9a64 30453f0acf8bdca4dec5de38d08a776b933256c8 09ab7e8a0c9c96624e4597b6e91cb202a8086ef9 5b795b658d14bd85ba6783131c6f42a37cfcce27 9018a377355fb2906d06b50008d04761491bbfd9 131e53a1fc2cd7156b56402c97d53af8da72399e 1372d8fc2cac3466d759500063a50d86f03dc94a d41b1c28c378c531cc9c66639bfa16778972281d 78c772e9d802d13522855fa3c8e2257c4933214a 4752e252ea6ee084b679a9b9551a1c55f8744451 5eefbc6db98985a5b63bec78fde7eef2f7fa02f2 688799b1f7b2750b938f8da771480d2c16d1ae1d f8d42a31c624f28f6c9bfd9678fb025bf15e9c12 e613d81d815d96a04eca42eea5faec71bdd459d9 2e5b8ffcc9ab8ac750e6fb2ac32eadeb6698540d dc1483c179d8e6e8ac1efe1fb54d8f1f2395077d cb28c2dbb0d92bcddea768bd5d43c5caecba6a0f fc7dae4ba5edd734bb0ffc7318dcc659d1797f2b 2fc11e8952bff715115425346d0ccbaed146bcd5 96c5109a0f1a4b203e2a0575764a2577f5270c52 bd12ec5dfff885a1bd5a5d05b2ec48129e6f4398 abe5fda90d918e0efbc0f4e122eee7cf637a2e9c dcd02876ea73f65dc286038f0f70189c4994152f 9def213de32a80fcfb05a7474be42f44d7a0c939 0e45f7b4cd8bbf8833737cb2f4f6aedecbe3a7de f298db7254a42b2818083469bba0ed8080be38de dd77ff754b949c21c986b61592cdc91884f2e175 a47f4daf8f70bc389fb1789e3e90df6138cf0549 ff9ce43c0127bd23d5aaf9cb6bbb28fcbe729fac 17785690c047d507d8031aced658b716969e8668 9dd1eaab44ae3677bb93160d4d7d709b26202dac 519f86d5aa4f61e47bcbf3a7207354523aa752e2 8ac77cfbf96689d83463928a9d0bdc5fcd054cb9 f3ca16379d8c06f3342fc3039f4be926325808b8 b1af31b47aa96ae5f6a8444ffba7a060f7ef6099 180f7cf412c486a4f2f769b44c0ccf1223226ee3 d2b0c10000ad53dbc0aa717b31f18f9078f35c7f f4d7d8955098a0255733ae304349415fa373049c b68138a62e849036b75954f7a406c64be5d86e21 6039b785947088d379672c709c227b96ce3be1e5 500131b2f5fcdc09eb15bb5db740b6ae5dfd9390 e0a2f85b788b5cd764582a71fadaee11f06ab979 e7c60141d616b609b99e59a19375fc9759c3e4fa 398cfe48079ce02f0f13f62273b31f5ee0fd1a4b 0eae5d3abc64e6496df5d7d7b36944e0cfada76e 76e48978a95deed5eb5fa601486648e3665d21ad 28bf959c5c342faa956e718823bcabb06a4c4c30 7053b7c615b44e7112ab8fb4c056206d32b6f1c9 de1eaee4804ffbeb0917b139638adb19c2106936 2a539470287005b51e2e72f27026fde26691ba65 5e240cdf50dc10003a8663ec9be51f9d8bb42634 d7e12831b04ed6645558bdeec41e09311200d7f3 9415667cdfbb4c94cdfe03a1e80a87482bee98c1 919a94aa954f543b49728f1750ea23aab21cc41c c4789b08f3bcc879d3a95b1023626a3e2a3a8967 5a174dd60446effe39f78ec7b4394e80e2522d98 2aa58e43a0d8589aa37f275147e5beab023b5d42 12dba1b2ae50099de4cd857f867ebcaefe6852d8 3347ad003a1f86b6d1cd83b63a8e8dac1e8e784f 1cf4a1c0880f0f39f6d986db53a3b108a6e5c648 088ababfc24751b951008570f6160a1e8dca0e0c 77e74fb1dbc8a435cefe17998dc73a4e40c3aeed c7032e9222fdfd3b4364d6c729fa5ca6f0b35f69 26c8fb8ce7a09698cdba73576cf924185dffd3a9 0534beb331ff9f1444db47cfb3c03224c1837aca 40d403c926e8f96c77d067188c842c12f099f9a9 e3e477e6a14fbcb153258b47d1905915dc4c1f22 3b4c2ffb7bcc86165c67def31debfa63ccae7a62 635e914bdeca3a148dab8aeabc8037a2e7ac8151 00e7d50f8bd3dccf2c34dac2501937b7d294ab76 c5f66fc784d20154f3d5905d25f8243a0fc6a330 eb45a75a2e76e9716d08ae35cc2512b02e3bf85d 9f8acda1677e90a5f429ef8db739adce700629ca aa08e1541510357f3c3865cc959cc1d60a1b86cf 66e6d87ab86c393f189aa8d409b62b3e028ed17e 3f51cb630497621042c0479d8a604d74a837ba3b f4c403d1f2100934c24241b0ed8f4e19cb0ff4dd bc2164e07487edccc32bff06691d14ab017a3f47 d1f83537e7f064f0f77ead043617bc213c8c0053 14994715e9337821aeac39c0f43b704bdc7ba200 42cb7d2ad1caba08de235e6319b9967296b5d554 823c55ad2755c36f55cce1f0cf5f0ee6dcaf9d76 ffa52880f2519c885ce61b89b847c82e0531c032 037b91620c4caafae943e7cd304f0d9df4335d21 4ea42892539d84e6fd5bb864d18ef26d0e2038d4 6e9d3d2014145930f688f4c5c9043d5112d41b6e d2b83336c7b219b3267035bd6ab9af5480184743 3c1ebfdf82242e28ef697c139e0e94cb5ceb3fcd 9ed6d24ed83d20796e2c5190365c26426a0c6a87 73fc0a18a693c179d676d38fe8cf0df8f7679ea9 7c4f2d5342a8673af994077ed2e586b0f3410583 704d0662bef08a980c87c408fa33f50fc60b5cac 82dc024a35a1a522b088df4e9355fa7752f40821 7b795324483504e911350a8c0710d4c2fa2b6dee 3889c374a11d92733f6830473ff589f8846a7396 ae15a4ca5a1c7270dcfe4f7456ea75fc946ab279 adb4e74b479d5406454dffa17fe908742306ac6e 1e4865ffcfa4933ff27b1e66405e1498dd9d1781 485c8566f103f05dba3c8c31d3adb18b89eb032a ca45eda758e29261691b27eecf1f4fc78bdfadc5 9a9fb47e24d3daa57aa24bc5529e33b6271b92bc f1e4c54104d92f57d0b3699a800c0f09ce4e8320 432d504118f4c00cc33c199946b36448cc6355e1 5a68254c131290adbf51843aa82f543afe99fe87 f30ba2cf256054c4aa6b75ff2f282dfe8e2c219a 99851ca4c2edd4b921c91327540d69dec77c5df7 e9b3660e729929f4e09f403d526759d532df03e0 4617f83fcf0a34fe41b0e38dde1567195395efca 35352575e4e8d9fc753dad583f2b24ed999ec8db dce5b9add1f9221c176e47c920e247ceeb70632c a07aa965e5d3c2f4a46387ad911ef1c8500e2107 440e31a73212382362cf64982de8ecf2d579cdb4 bf6a803e04db1c466c9e7b1fd44e17ee10b17381 6b96e0e0cbdc28e9dbde3fa3d9bc948b512fd1fb a6fb7be678438ab689ac87ad4ed21a9b33a17c2e 20bc32cddc6ca8b1e2577cbc12050804972ca0ac 242dc8989a993d1b3807f437fbac7b92707b6e28 fe7b8d70d5229c693dc16b743ef0ec7f76a1569f 42a2ad202e6a260dc9e3f04939c7dacf270f7434 83f9e784e42c404e31172e55a406a8403c8a33de e9abe3f7395a81dcb6d192b48bd54848dc4f2b5e b2d38f15314e39eeb17ec5e02bc6fe78b26420e3 9ec5be2cea3af2ca631ef0dce3208965058abb59 1037bf54bf056090855c3e2dc8c70193f18a243e ef01f6ac1338dcb100bc2ff5cd1cf360d7d8520f fdb3d9ae320363c1bd9fa716b167a7ad313e638b 5498ebd8c0aaa651ce6823cccdf572a3f551deba 052e8dbf5985ffa5875067491b03a523257752f9 85db4f7ec28a5d68fecba624f518dc1d2a07e359 d7ef680e950431d868e6d52418513472af7edbb3 3b745f17b5553f88011a50a7b355f0eb3f5084b9 99520e1997b92155b9e389513960b0bdacfab9b2 992bdd77a05755ccbde22bf244a41ab3c50086db fdb09f452376ead1fceeb04dc5407095467418c1 c71da19d24a5d6f01e65b3b3691a9d7dd17a2278 c6fea822a99ca4b5c82e5217a0a631434ad52c29 0e46dd09e5c71726f0c120362991cd3b2613295b 7aadafbd505ab61c15bccb7d995cc9f4afc54e3d 22f53e6d9dd23a88d75ec8b6e4b3a73a186344d1 f5badeac28dc245c4804d4d0a72ddfcea66846ac 48a23dbd432d8dbeaa884fe656105d902729f8de 409160bb596e44bcceee24d9ecd4d2629cbd6cb7 4d57e8f937fc866d092539ceafb989d740462d2c 9c6d0f6eeab8eb58a9cfc4ba3c1d3c9145b1d8db 6695ca86a29c4ba3844445480d5591c0dd75a824 07194e9287eb2e2adbc2d1bdff204b4f8dec3ef0 2efb498a7b088a0d1d072754b668fcf752532de7 f7a7633aa107003238171c12f52d2f57b93bc3f2 b21d2e5f58dc5fa713174616de5042e05e13a1fe 5ff23d2218b6166c78cd587b1f633a2a3540a541 3b81ea316198e1b128e0e41534da48218f5b641a 86acbd0122ddad629f4ac55595782f2c704d54dc 674ec0c7f6754c47a5a513ceff80663bb8f5a3e4 fb8a44f3ee50badd85af4b50fdbc1db28ce76ab0 63b66c9955b243e20b280dac236dea4fdf21c92c afb16545671e7420c7a8bbb4ef97333c33001564 bcc3410732c60e32eaf3abd808be7482218f57d7 0357d2ca75be92e927bb785a786d3766c94f3c83 9ac3f24f744bf76c252fafb2c2e254bbbf38ed1e 4a49af0cbeb1bb5570d92f679c98ad05abc693e6 eccd21e38735fb08e31a4be1a8897ebe248747b4 9ec262ebcc7f14d7373841d4ca082b855ed8090f a2e77268f2007f2819c2e3e8bd736a056f309a4c 0a57d3853bd0b3bfd25b7d171e8c9bddca22f52a 56ee3a8ad12b02e2c53a2f3737bcd6ba15fd4737 94c1640bb38edd76bab13b29f1444bce20edcacc 587ca81f8de4fec07217b4e55e370f3fb6095773 547855e623c561c23b205f18d017e53d5ee75b7b d25a267978de5949a283c5f76405175316f8f773 2789787f011e1a923dc22b6884433826e9350725 0c3c89b74decfdab8e0227d87e5eecdb3380806c af3320c57576166e0d306c1e4d9d4d3964ad58b1 d8739008bd33dfe2587d4afc524b17ec87f59ddd 095b0f5acc225ab79db2406d42686b8c51b4d887 e722660114e268179344e2e076a8e10b0f8ab3f3 b72270cb16bc670bbf46be6fdc8dffc525d82f35 7e4ea871a33f226684ecef9ba158cf9cf8efe42d 829c7595130bb84e131b797e45a84176b169a81c b14eee69c7240658252bc96b6302e98948f2c62c 113e9811c473dd73b14964893cecf0c7042502cc 6f862a1ad803b1a7037797cedb3624445538afc1 5ebdeaaa372186b4c3a9098676c76423a1781154 368e3a93b8da3641c53f260bb4c96d03d00d1080 d0a16b7dc99a4040e4e804c04d71a24b3a9d829e 461fc592ad1462c022bcf1c2cebfaee2bb5cc1de ca0db956a65f9010983c6723643e50df115ef34a 340a661723eab4afe2204837716e2b53cc14f5f2 378ce9e6bea05fed194d44666eabd7a0d25caffd a0d325333fb0cba6028a15b924dd115cbbdc0586 845156cc3dc8c8c6b1b62fcb57bcdfc25c94e100 1320b15dfc87997e60d7a2af70000e5650b83cba 49fcd632e4b512421810ec4e35dc455b3f7697d3 f8699c0a71a528d287b84cd0bc5b5bb7cec924f0 518decf16b8445f49cb8bddfd081e7911ae28212 917a206b01c82170a862e8497cbe26b6f1bfade0 20715ee3fdaa794a7b6ba285cdb72b68991c65af 82cd85b07918a4437428497ffaf7f13286b83479 829739273425ba3a275aa8b93cde82bdff02975c d33474fa6bae057b6e7fd6acda76438d90dc66bc e0e3b6bc91f7db956e3a66f2938eea45d4055a39 8898a6951988c95db3e92146b948a3b2aed08fd2 a4ab07a653d5bc912e954c1fb970aeabb6daafe1 640773aa9ee64201dd4985254bb259b14f7f640b d04baa29e296599f3736ab9bd7c830451eb3335d eff42369e9c59f330083e25a23762df084ce6869 2d38551dd9012db1361cbd5ff3de6cb5fb90dc60 1a43c5de71eea457855f7dcfb7e5811f1c74ebf8 434871fd1b6d1fef8c68e8d35689caec49367e20 1ff8fe20bf87f0b60e2b1a185fd3f9ee383fe31c 8622eb326fb8120fc038e27947e61677d4124f15 ec3cdaba4f018a87ef2fdfdb2e47a8b7811402f1 af3aee8a5a2852951b1fbc6e355e674fed9d4c5c c198390c78acefdfd95ef3474f192a44f8e80b2c dfa48037ec462c279bf314670d07f04696a9a25c b2d09cbb219e43a203d908199cf0ada1aa344b8e a0266339c777eafcda918a253ec8d287372fc84d 031c744a1fb9b94f7a4634eae5f56845b586554d b116cf848a0816e8d03fad93bba1022baf53a229 e3caa9c420bcad90bb850e588845d18f4d99e435 25f7aa52adf126b24c1fa2eaed9bd4b40152aa82 af9a8b1b0890cad21b23279d7f0dae083859e960 4448715cfbd70b214c332ab9fdfdfe3f28508177 dc672b49ca887c78a3e20854d96e7a56e967c072 e5493e34e4a0c21771200b0ecb72b7c24c484f39 5376bc5ee48f4ec3485dd404b32bd2530c24d3f7 66fb3802d31b34360f87edd11eb6508bca785824 086072ca6aa98e1d3107cac828c1d96cba01eeca 695bf7a64532fe9755f2a471ed9e420b9e08539f b64208df0d8e94259783081084c5a731e0839542 e9951dbe37c9fb018e677d872df9f563a0861295 a07cff77d3bd452c3c4b99bf93503f727bf768cb 72fc2ceaa6ae472a809b4d5c02be98c44388c1b7 c02b63fb60458ec750e5991a7491235861c40061 69b6572338396134a3e20189cb35445d68757ebb 25d6abb951e111fd4da1130fef16749ae6981540 887332f9c7bf0d75f53f88a9739b77b12463d636 21f1fa82a8c7bd1b077f0289141972ed619c5a5f 520040dc4a287fd62d7d5161c083cee990c3d6e6 8885a51347a768d8a9125d573963d12ac67d4715 2d5bd21f31e2a608120ba262ba2af245526905d3 acc52bc90ef1d3cdfc3eef97bb3ac84bfc96cb4c 3a9edf9aad43c3e8ba724571da5381f821f1dc56 b6722aa7527abc71cb46ab75e4b875c288408d52 d324014d42bc759b6a6faa594bdecce054e294c1 3df16c0b70f734f5260bfde0f68239976d6a5842 70fceaa2fe581ed41408faa368ff3f6833fd463c cfc9da22f58659e57d20d76c1c45b91da9dca789 4478ba258e45559ac97353ab27951e84dd9865c1 8a169390c9ef4d8a43b604558c4194a052473c0c f89f7a54c25eb202e70225713ed39687be048e26 4fcf20d1d120985a6056ef8e1861738c2e903660 64731a8e9fce07a7c34374dc0a6bb6ed8b5f6183 e1e34cdc375baf2d1d5a2266ae0faa885987ab37 eef527723f02abcdb301b02cae059b123f277d26 43be3507c04b56938e985047f2ab55147ed8ddd2 83a4549e9baa252d0fb92d14e5a39119b8583813 15c3eaafbb3a376998e9c5eb36cb24816dad5447 f1ff598e2aca810c3a0540d6a764787d31890741 2334f4e64582a518e4d5a7627472a0d817b147ef 067648cd2bdc4776cb69c6554ee9d799e0b201c7 bc8745851e3005fd98c45fe06fc9d4d92c68fa53 716cf7d342466235d3117db5da788704cbf2853d 38c78a968259963d29559096dda575237039c561 b9f531a0e81ebf7a0dfeac00d557632546b12f56 ed566a87232fddde73481efe2dfcefceca5e49e4 69e9651c1ae0542e52f5ea924b9e286584446607 847b93c7400f82225057e8b71938eb8ccd5d23be 13b2587d4f55d64a1381c60ac34acf4abe6bb1e8 be2443e0c5f021bb98f92d72191c6c55a031873f 0556d9e6f1c0951e6e4026efe3b176407b82fc7b 18f83c12a04f934eda74fed77055073075bc4275 52c04e1e390e0008580eca7343f5c04aed3d1323 bededeccc51cc766ed48ce861a2a411ad8d22a87 6898bdca94cde73bd8d8b88d99153a731f6a7a6b dde38fda6eacf453cb48f75b7579647ceb75e9fd e60591919850a79a483ec3c138fce96f8e1edb57 b8dc6b241204f5348563a23f51765234ef19f044 13c1f008c0d8beca934ebfd347dc8354f4c9db05 7161dcd42653452a2373a7595a7020d0a59722f4 c031662fd0bf1bc366185fe85a342bf60a9fc0bc 10dbd1edd19008bc8eaeb55446e1e5fd87a12814 438abad27c797ca806938188f725fb0e36aa9fb9 36e55720b66743d161330183693949e4f8503cc7 01143089f08c662a75f5af47fc2a8a3f8ae2afd6 9b9845e43e08e357588bb6a2ca6bfc15ce2dcd73 577b3924408cd1ffa7d2559999751a9ced597882 31538a79a90653afb8bc7744506989c8811a800d 99649d78927bb911b8a9022c8f362e0a7d9c7ea9 b7ccb9d06a897a384b71ccb959b431168ca07e03 537bb7a8aee278d285cb77669fd9258dfaa3222f 67949d96a7c49b95801723e8cfdf327e907822cb 9e3893cc29dbcfd53d89abc679d0207cf2492999 251335cdf35d4ff1fcae9c73f77136c9b85e7d96 6ff0bb786c43ac3348dec6a977feb36af8bc4bcf c468a36903aea9ddac12b25c93cc5b65f293d6b9 a2c890c1e104140f83209c8d1e8ee298b346e38d 5f9f827fd4effe08d544964db349b56519952da6 78532a0c09c33a24715ae5ff7f446f1de488a24b 7e3d265469996efc7e720685be9b2c524eb7434b a0b7fb9bb2a6f446a0018a89bd8b50f756a0fe1c 2e6a2cf9c65e92db51edfdec6fbace8e49e90c7a e84ec36a620a4922ddcb9cdce9ddabc2573ee1da 44a230937b6dc320aad8b18828060e3e916eee03 2ec86fc20a49020a52cbec2727aca966642f9fac df5e4764870e8ad1d8b206cb3475a073bc034e48 c1dc5021ac2534ea7bf52246f13c19941b791efa 7e9ccbe68fe5215df9bd8e424195e1abf56f7286 f6bfb4ce00d27c4bc11615a5426065749e72b70a 888d66a2376f0da076ec312ef5ca2d93fee0e2f9 e9e5c95058df1f409debeb6b05aa222b476d79f6 c4c3b06e83ce8f7f18e77a101656ba983fb0d0e3 a20b997b3430bd7dc94ffd587cd299efa467420e 98eab245d3c3377af0c3da6880bb8ede80cb0925 c3e2013b615dd449113fe8fce0700319aa082020 07248fc5002fb109de8fc8e51e9d05329e0cd8cc 06fa3d32a73d59c7fec59a8682e3750150f84554 9ed951266244ad75454cfdb63ee0e872ca9ac43b e0fca9451146908402a8fbc770ff189aba636213 573be7e6023e73d736c341bdca1ee49594f56ee4 412555e0cdcd16439db56f6bd6ea56cedcda0883 d4c2b61c48cdd35275684e75427d2cf0d8d928de b86dc3926bfe5cd92400aa96c89b0255eba1d447 ee5c842e5303c70e88a1c68390c46db1f1689f19 a4ce2f652d76d033a79434416ff585cd15356a87 84d25135b3b2f9a30619f741d166fa1daa8298e5 df513b95ec24d279a10fbe358973662ce2c9c385 d8d6a6b2e639d2e29e166a3faf988b81388ae191 ff19f21913c508f5827df0e7e4c3a351c36711a0 552bc8aa4703b674747df36c591038da17c0c858 509ad75adbca85d606a3bd8bba727abf0751cebc 246dedaa091308f140a3cac41845f5e978492e37 4d70266274c1102c385dd00303d312d94453d19b 2333099c52566c6cf3d3f981588a26d4ff408155 0c14b1a962573ee125940f2008c646befe597226 683583faf2f4b00874f702429393b127aca8eef4 20c91c5e803090bd40fe3045a0d9fea0a68913e4 7f28a1c521341399da1f3559358f2abf876d34be 95e2d05e5d6b92a2f6b28e00f36064b7bf6b249a e561ce4b9259071f79d219dddf62f05cdd8dd07b 8e5d3042786917c04d3065755d81e7f8a751e529 245efd04e1456a71a6962acbb8ebc279481e9ffa 33c750f50ff8b6f1eae63140e8287c49a5130a60 39e7f25e0918d23e5b9ef5fc5049948b6f56525e ca3ca7b046ae94a152b1367ca982774345887e55 cdfc45859c299aa629482ee06614c9819346b444 f1276b25ae72e81cf044134bae92db6ef73be3a1 65edacf93484faf1dc3d11e555081d69556ccbc3 8b87d6b81408e5d6fe34f9e9fda1df2f4f2e5cd0 efd59e378c2ba8cae98fa664ae98521027e96b81 39915c9bc42f17619b1d2c46e6b3aea485c471a0 a18444984171ee86503d1250094965fb50a198ee 4ffe39573b537d638e4b39c9b5990c6566d62b09 cd0c5988020acc92ff98260e3304967bf31e4e87 f1d40d4824b568389cbc328cebb5734430b52e44 35b063a404457fdf956d1913738a3c8a66266cb4 be0eb9c92eb7a4fcd9d0d48568c8ed5e8326ef0b 9fe61171e515e7c77720675ecbe69731219b549c c96ef78b6d6d9184d8ec4cd18924a3049d388583 7c32b2dd9368137eca3cf0202360bbe0db62efbf ac90898f72b02bbc226a95deb40555c1fb8ac3a3 87fa906a84621295a76035d73dd6305c9cd2ea4a c0319e0eabbad87a3e153c23f2461c881153b984 b925dd78b813decf386139a15aa7bc6863ee7ae5 3e9f8c87e5a2acaa80f8bbb1d50fa82147942143 704975f58d7947721f530d202022721c16df466a 04f41e87a369828a698f62c32cabad34ed34a3e7 01150d7f8d27ad5efdb824da938c4a9fa562a036 1a743c9af39d0224b65ae504ae7e24d9fad56c2b 8a63b688ac49f19c259066fd100407edf3747f95 e6e2f2325a0a4eb14f10dd6df319b068761e9600 e854ea34cc481658ec61f4603d0438e075608c98)
      #_hotfix_stagingreverts=()

      # Bringup - meeds backports
      #if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 194669052e1bce63659f1fbb0880da3dcb03058e HEAD ); then
        #_reverted_reverts=(cb5edb4b12eb4846df85de71b889959a96586720 b1f2b61be040cccaf6da6e6296bd38a24f05f55e ac36b8ff01be8e6e6c8f46096b434f7048097559 abcc75cbcf57513f07ab8c008f66a19f142c5a7b c4383013aab04ecaf2aaf969ec6158d28c0c7f02 a472ad191f3f518feb9e100a20cee835e3109561 209b968efc2336a72f5223f0c73ff46f11a2f1ba f0e13847779fe058b655c8ec1a20f61b431f7df2 459046561328735dfe75181ecd825410747c6451 b8ada902d12f628883c790cdef3bacf5853a7f81 54c1b0ac267abd0e52f23a60143999af2cd49b03 d70c8e464a56a17f5c0669ff668fb1070781faa6 d6da10f3fb97f412ccb1ea4a806b13be3a0475e2 0c2f556afe7b5fcc873c737512fae5b9c8c07624 9498f9625a7b4b704f10b1bb321685371b0c999f 02a764e702094572186e079f6d48946627336d03 f4d376ea07c3797d31ff918b3e93129655ef670e 9fff80d87655ae9f70094b34661abc2a399395be 2a573c6f4899e7ccdb0492ba5029c7f8506590e4 088b7c5814e8aee5676d0c999a2995533f21a4ed c2b089aae52c1d275098e1e8b87c0f9a5340b206 c6806e3f204413294bd16a7b93dc5893bc00fe83 8fb897a5718767bb86c734c8ea90245aeb7bee47 18df4912f455e0fb09b232a409c5825a44ee8f2c 29334489795f0f3fbca52b65b7c5a002983a997b db8a75312d55480392a8bd9304339b5adba70de4 3ad1739bc85a69c3a2ee4df2ccc1d7b60b466e9c 18f83c12a04f934eda74fed77055073075bc4275)

        #for remove in ${_reverted_reverts[@]}; do
        #  _hotfix_mainlinereverts=("${_hotfix_mainlinereverts[@]/$remove}")
        #done
      #fi

      # Apply fixed d8d6a6b2e639d2e29e166a3faf988b81388ae191 - server: Partially implement JobObjectBasicAccountingInformation.
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a302ab44acaf72ecc9b0307c82a7d11f759e6a72 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/d8d6a6b2e639d2e29e166a3faf988b81388ae191)
      fi

      # Patchset removed with 5e5dafe07a74809f10ec784fb214701e5b9a83e6 - Since it's partially restored by the reverts, disable.
      if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5e5dafe07a74809f10ec784fb214701e5b9a83e6 HEAD ); then
        _staging_args+=(-W ntdll-SystemRoot_Symlink)
      fi

      _last_known_good_mainline=de679af492ed93d70c99dff7f7cfc01cc8f25eb0
      _last_known_good_staging=80498dd4408b93dd4591d46928b5ec7f8aca6144

      # staging unbreak - #1
      if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 601cfd7fdbc40dcd9757da9d77fa2923cc0c9926 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-113)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 6d726da3ba0130385e352be0c534399d5c7eb29d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-112)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 3cea972271b4529e332c75b06f902c80e7de1798 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-111)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor b49e8743866224df57eb1032b6c63c999b28c808 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-110)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 24fa2aa7869fd7076b8cd161cdf5256e7042274f HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-109)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ab4391f61be562e93b816e180fb193282cf9b35b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-108)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f6356a2c93309e9986e48fca3bcec63a0dfd7b1e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-107)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ee0185d9e2a28e23be9fac622c9a9252e0e2acb0 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-106)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor df029674315b79b8d0d96eff4e90b6d99e039d47 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-105)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 194669052e1bce63659f1fbb0880da3dcb03058e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-104)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor aa7895faf6ae1f61441aad2d9116b6e11f32652e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-103)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7145412e0829b4de99704ecdc57adbf75cb800ee HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-102)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 76a479203be67818473eb50bfa03afea20ca8859 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-101)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 639755741ebef1cdfff311eed215e0671924ebcd HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-100)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7b32c6a57ff4986f4bfca191f73c6d4292257ad4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-99)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7bd8acb4ca8b301fa9edee3601deeecd72522091 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-98)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor de03562a2d7773fe0e3417996fcfe30dec00d5f4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-97)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 831d2d8b522b323d542dee6bc7ec16cb59be0b69 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-96)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5087d8a8d91c5388c4d00e5149faa68e178dfeaa HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-95)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 91a9c0e3db7583fa830b7c41d01ea9c029474605 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-94)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4125a9880cf471d2c49fc210a760f2cdffffa9f2 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-93)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 71ac12a8e3c843fe32d4c4b84ab6120b9b8e0a0d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-92)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7fc716aa5f8595e5bca9206f86859f1ac70894ad HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-91)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 88e6b6c65c9a57e5628b44468ca6cdd28d6e13dd HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-90)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9a9401026fe63cf02693784ac742c5c9548ca6c1 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-89)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5e685d6df972b658fba296dafb5db189af73c7d5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-88)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ad66963dfff6481d50d6b95dee71cf23e60669c5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-87)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 480bf20becda07ac96b1de48ef59b07bc16fca56 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-86)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7a5a98a14ba33da049c0a8849bcf8edfbb9d25cd HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-85)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor d7df18ad2d5fe65ae52b34026471bc00da85a22f HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-84)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 603343a361df15d3d3e5b22f2703ca6f0e8eda81 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-83)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 1d149ff59d6d4b400ad53eb5281c66a4d0297494 HEAD ); then
       _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-82)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 285e594688617fb5b35664f4970863ad48b6f117 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-81)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 6c6ef5bfa43c3bd9385356ed160da6f6cb090989 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-80)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor db87b45e49a0fa887bc24e232b51cc1a8cb996ec HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-79)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5af963636518587f6be233f4389dc6b90dc0af9d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-78)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor fd175dc86377920938c9d3e444ed7e60ff605cd5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-77)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2b119ef030ec1dfbeebfffa5375d91aafabdf5e1 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-76)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 8321c62f2418380a6b2f1de0cddff8e2a73da2db HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-75)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor d452acf61b3fd3bf6e3b4d1b9704961f58f5bd3a HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-74)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 663c3ba4976dd60b3da62637ed408f2c53198151 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-73)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4242749b5b446bc78ff9ee2ef86cbd5843eaa031 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-72)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7d08bb86e1b72a9bb081cffb938205d7c49823cb HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-71)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor bc6c681225dc8d37f3efd05236a1bbc8d0bba748 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-70)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 46420edcd048311950a2fa527f812729ab594712 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-69)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor af56d3821a32c84305fcc55b03b7ece4e1f7b3d9 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-68)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7c1249e5c05edf5acc9419d55642990540a32e54 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-67)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 3b24c1cf1d793f24fbbcd6847decc38e5be60ff3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-66)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor e4a11b16639179734e1d9f12ab4605dcbfa21a27 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-65)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 23ae4e6c7ac3b4c463ea79944dac62affe6173bf HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-64)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 261a981d774a8e54b2ce670d287b9c3ff355f842 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-63)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f7013bb1b4a6623868bdf9429973dcf1aced1239 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-62)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 99c296e10c08046e2712a55d576b6c41281db0cb HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-61)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 02be23fa5213c0cb0b377b5120ea256d6b5f1af4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-60)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4373a1011e0ce8b631201b26d0b6be722403c776 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-59)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 26d3815d8c0744a7cdd89370b0c78be5311d0df5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-58)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ee89d77f185ffb48741f98d491eace2ff26accb8 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-57)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4ffe305c90f9e15141f2c1b10e86a15a5b9b7e3f HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-56)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 1a87edb76b15138334ea680677f2b00ba9396aeb HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-55)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 914f67c020d337fdae5cf3cfe7508821766e84e8 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-54)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor c3c5d48b18d644f5c2fce51019649264d383707e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-53)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 884f6464043658b24d7a50688ea2780ca7c5eb86 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-52)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5c4729e4ce2fe2c2dce99237bd39ea45cac45dfd HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-51)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 103195f07d3fbb40ce6b91ef2247c5d7bc9f240a HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-50)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 3acacd0ee1f884d382406e06b97de5327c914520 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-49)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor d2d0366ce5df254957a96bb6b7eb02c1616dba1d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-48)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 913b39b117ed7dd7849098ec22bb8094753a29a3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-47)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4d315a60980e1a1f171ba4bcb2076554e6b8229e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-46)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5e5dafe07a74809f10ec784fb214701e5b9a83e6 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-45)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor bb79717d86506d4267b5a453d206e742782fd2f5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-44)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor b1219b7fae8a9546ed23f58663dcdd7270c92517 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-43)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 046f6604b763ca494bece1ff16a0919077ecb9d4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-42)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f6954e6e77dfd443f5bdc28190ad478e0d6fb77d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-41)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ebbd01086e97dc147061f822742000994431823b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-40)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor b1765ff74e39826ded9fedc7c692ba24266ff800 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-39)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2e111fae102c9b00238ab0a7b09efff069198dd1 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-38)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9cca205cc2e024ae786fdebe398b900a119f197d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-37)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 502c444d9c48500f07e5dddeb47a7acfb45be9f2 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-36)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor cbdc68f558627cd09404c9ab4768d1c38353f383 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-35)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 70f6f6d7e40c041b9e3674f1273bc17763d612aa HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-34)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4995d0d3af5d917a240f568e6ef07c2fef6f7955 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-33)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 40099e26bf373bbb11de67af7e58c56c3995fe08 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-32)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 70d81789275c4c5b8fed019937bed55d81ed2c7c HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-31)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor b6c2818755badca80ead487e156f48a53775bdb2 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-30)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 37fc290f7786687b95a90b58e31fba00e3f092f2 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-29)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 82cff8bbdbc133cc14cdb9befc36c61c3e49c242 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-28)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 60074b960facf130e681f5317a96394920f902cc HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-27)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7766c17912e843f4274440062ebe754a08874780 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-26)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 6274392d27f113156dcc5d27f10425851c308e62 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-25)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 8e5546184f0a1f4b16646bbbc67075be723c785c HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-24)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor d799e8fd8296fca962e29ce3b9fa7e571f461185 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-23)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 02913f754fd91f41fa11ff47fddbd978943f759e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-22)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 03f5adcafbf5136a92ad7474265e4e81bc69678c HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-21)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 984d40224092f734d94e3d52e33230444798de96 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-20)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 32fcc0d75b74642e0f5675e9e3ffcf081ec3f9b2 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-19)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor b6595d9e28a60b48030a3b74c31afd73b1fe4065 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-18)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor eb4f9db59c29b92131b9d0de35200b9abf1d394a HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-17)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 11f545447b76eeab1ceadbdf9a58ee3d07d281fb HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-16)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7934e14fc04a4dbcc19f9a3ada72cf6822cc4098 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-15)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 5306e1df11e772fe8125fcd5857e52cf1f83430b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-14)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 938c0aa15547f151622dfdeb1f66507624248cf4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-13)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor cb2a6551bc686820bda7efb21da45663128d0b2c HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-12)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9a4c8c5631101f8571dbdce726ae864060e446c9 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-11)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 044cb930662d61f401a5d1bdd7b8e75d59cea5ea HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-10)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f1917e904a666bf492b8109f29869ff14f8c2623 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-9)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f12808c094ef06ba7151d35e6c6e70ae965ac2c3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-8)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 8a2765d1250572378f4c43f9f4e19e7295ac9fb4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-7)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7b78338b078a7a55c5851a91064ef70836f4c996 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-6)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor a4d98c48f982b52375f0ccefc217984aab936033 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-5)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 676f261e5e9959e8fb9fe6266ffd2a29bcda2c0d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-4)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor c81093882b2b9ce4a5830437cecdc58b8807d29b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-3)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f132e60b9db336495acc50f2a31a6aeca8d89de5 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8-2)
      elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 06877e55b1100cc49d3726e9a70f31c4dfbe66f8 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/06877e55b1100cc49d3726e9a70f31c4dfbe66f8)
      fi

      if [ "$_hotfixdebug" != "true" ]; then #debug

        # staging unbreak - #2
        if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 676f261e5e9959e8fb9fe6266ffd2a29bcda2c0d HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/934a09585a15e8491e422b43624ffe632b02bd3c-3)
        elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor c81093882b2b9ce4a5830437cecdc58b8807d29b HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/934a09585a15e8491e422b43624ffe632b02bd3c-2)
        elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 934a09585a15e8491e422b43624ffe632b02bd3c HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/934a09585a15e8491e422b43624ffe632b02bd3c)
        fi

        # Fixups for staging's ntdll-ForceBottomUpAlloc
        if [ "$_use_staging" = "true" ] && [[ ! ${_staging_userargs[*]} =~ "ntdll-ForceBottomUpAlloc" ]] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 97fbe3fe048340b22cb6144bce5a47122bd7e241 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/ntdll-ForceBottomUpAlloc-97fbe3f)
        elif [ "$_use_staging" = "true" ] && [[ ! ${_staging_userargs[*]} =~ "ntdll-ForceBottomUpAlloc" ]] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f2686a1537d3350ed07c852c84c835798dd90a08 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/ntdll-ForceBottomUpAlloc-f2686a1)
        elif [ "$_use_staging" = "true" ] && [[ ! ${_staging_userargs[*]} =~ "ntdll-ForceBottomUpAlloc" ]] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 044cb930662d61f401a5d1bdd7b8e75d59cea5ea HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/ntdll-ForceBottomUpAlloc-044cb93)
        elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 676f261e5e9959e8fb9fe6266ffd2a29bcda2c0d HEAD ); then
          _staging_args+=(-W ntdll-ForceBottomUpAlloc) # Disable the patchset from 676f261e to 044cb930 due to breakage
        fi

        # Fixups for staging's wow64cpu-Wow64Transition patchset
        if [ "$_use_staging" = "true" ] && [[ ! ${_staging_userargs[*]} =~ "wow64cpu-Wow64Transition" ]] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor eb4f9db59c29b92131b9d0de35200b9abf1d394a HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/Updated_wow64cpu-Wow64Transition)
        fi

        # Re-Add ntdll-ThreadHideFromDebugger
        if [ "$_use_staging" = "true" ] && [[ ! ${_staging_userargs[*]} =~ "ntdll-ThreadHideFromDebugger" ]] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7766c17912e843f4274440062ebe754a08874780 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/ntdll-ThreadHideFromDebugger)
        fi

        # 3a9edf9a hotfixes for fs hack, then no fs hack paths
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 3a9edf9aad43c3e8ba724571da5381f821f1dc56 HEAD ); then
          if ( [ "$_proton_fs_hack" = "true" ] && [ "$_use_staging" = "true" ] ); then
            echo "Hotfix: 3a9edf9aad43c3e8ba724571da5381f821f1dc56 revert path used" >> "$_where"/last_build_config.log
          else
            _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-3a9edf9aad43c3e8ba724571da5381f821f1dc56)
            if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor e0e3b6bc91f7db956e3a66f2938eea45d4055a39 HEAD ); then
              _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/002-e0e3b6bc91f7db956e3a66f2938eea45d4055a39)
            fi
            if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 1e7378d80c20fc8f45a246fd043ef4e2911e94f5 HEAD ); then
              _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/003-1e7378d8-447bce41)
            fi
          fi
        fi

        # Hotfixed e854ea34cc481658ec61f4603d0438e075608c98 revert
        #if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor e854ea34cc481658ec61f4603d0438e075608c98 HEAD ); then
        #  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 18f83c12a04f934eda74fed77055073075bc4275 HEAD ); then
        #    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/e854ea34cc481658ec61f4603d0438e075608c98-2)
        #  else
        #    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/e854ea34cc481658ec61f4603d0438e075608c98)
        #  fi
        #fi

        # Import rebased 537bb7a8 and b7ccb9d0 back - Breaks Blizzard games
        #if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor b7ccb9d06a897a384b71ccb959b431168ca07e03 HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-ntdll_537bb7a8 "$_where"/wine-tkg-patches/hotfixes/01150d7f/002-ntdll_b7ccb9d0)
        #fi

        # Import hotfix-rebased 01143089 - Fixes Origin
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 3078f10d43d834b0498358fe0accb565191b7020 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/origin_3078f10d_fix)
        fi

        # Import hotfix-rebased 3a9edf9a
        #if ( [ "$_proton_rawinput" != "true" ] || [ "$_proton_fs_hack" != "true" ] && [ "$_use_staging" = "true" ] ) || ( [ "$_use_staging" != "true" ] ) && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 3a9edf9aad43c3e8ba724571da5381f821f1dc56 HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/user32_Implement_GetRawInputBuffer)
        #fi

        ## This breaks a few things currently, so let's keep this out for now - https://bugs.winehq.org/show_bug.cgi?id=49815
        # Import hotfix-rebased c487f21b - advapi32: Build with msvcrt.
        #if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 53d956700adf17eb14e02292ee520cdcc8e7ba99 HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/002-c487f21b6b95f1fda2f80920135e8481dc86e4a6)
        #elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor c487f21b6b95f1fda2f80920135e8481dc86e4a6 HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-c487f21b6b95f1fda2f80920135e8481dc86e4a6)
        #fi

        # Import hotfix-rebased 9cc92365-6456973f - Depends on the patchset above
        #if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9cc92365560f19c2fd2b9796f79aa75e02381bb1 HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-user32_msvcrt)
        #fi

        # Import hotfix-rebased 8db14f4e
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 8db14f4e18a3770b4ac3cfe6e1ddbe17dec342d7 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-8db14f4e18a3770b4ac3cfe6e1ddbe17dec342d7)
        fi

        # staging no protonify fixup
        if [ "$_protonify" = "false" ] && [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 8898a6951988c95db3e92146b948a3b2aed08fd2 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/8898a695-staging-noprotonify-fixup)
        fi

        # Staging hotfix for staging esync no fs hack path on f904ca32a
        if [ "$_use_staging" = "true" ] && [ "$_proton_fs_hack" != "true" ] && [ "$_staging_esync" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f904ca32a3f678bf829a325dc66699a21e510857 HEAD ); then
          if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 1e7378d80c20fc8f45a246fd043ef4e2911e94f5 HEAD ); then
            _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/staging-rawinput-esync-nofshack-fix)
          else
            _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/staging-rawinput-esync-nofshack-fix-2)
          fi
        fi

        # Import hotfix-rebased 0720c6cf & 2b76b9f2
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 0720c6cfd0b8c863fd22053c2ca750fd982d49d2 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-SMBIOS-0720c6cf)
        fi

        # Import hotfix-rebased d29c33a3 & 734a7120 & f7895ef2
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor d29c33a35c56f9a348ca8a8de01b7fe7eb4c4ef4 HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/002-SMBIOS-d29c33a3)
        fi

        # Import hotfix-rebased 8622eb32
        if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 8622eb326fb8120fc038e27947e61677d4124f15 HEAD ); then
          if [ "$_use_staging" = "true" ]; then
            _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-8622eb326fb8120fc038e27947e61677d4124f15-staging)
          else
            _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-8622eb326fb8120fc038e27947e61677d4124f15)
          fi
        fi

        # Compilation fix for staging winepulse patchset on f82518af+
        #if [ "$_use_staging" = "true" ] && [ "$_staging_pulse_disable" != "true" ] && [ "$_protonify" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f82518af727a5651808d1a0e5e83777cbb55ce0b HEAD ); then
        #  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/winepulse-staging-f82518af-hotfix)
        #fi

        # Import hotfix-rebased f7edc328
        if ( [ "$_proton_rawinput" != "true" ] && [ "$_use_staging" != "true" ] || [ "$_proton_fs_hack" != "true" ] && [ "$_proton_rawinput" != "true" ] && [ "$_use_staging" = "true" ] ) && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor f7edc328184c4755c81dec5372b3ae5ac7b8c5df HEAD ); then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/001-f7edc328184c4755c81dec5372b3ae5ac7b8c5df)
        fi

      fi #debug
    else
      _broken_staging_44d1a45_localreverts="true"
      _clock_monotonic="false"
      _use_esync="false"
      _use_fsync="false"
      _proton_rawinput="false"
      _large_address_aware="false"
      _protonify="false"
      _msvcrt_nativebuiltin="false"
      _plasma_systray_fix="false"
      # ffxivpatchisnotreallydead
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 683583faf2f4b00874f702429393b127aca8eef4 HEAD ) && [ "$_ffxivlauncher_fix" = "true" ]; then
        warning "The _ffxivlauncher_fix option breaks on your current tree and has been disabled. Please use an older Wine version for now, or enable hotfixes."
        _ffxivlauncher_fix="false"
      fi
      # lolpatchisnotreallydead
      if [ "$_lol920_fix" = "true" ]; then
        warning "The _lol920_fix option breaks on your current tree and has been disabled. Please use an older Wine version for now, or enable hotfixes."
        _lol920_fix="false"
      fi
      # mk11patchisnotreallydead
      if [ "$_mk11_fix" = "true" ]; then
        warning "The _mk11_fix option breaks on your current tree and has been disabled. Please use an older Wine version for now, or enable hotfixes."
        _mk11_fix="false"
      fi
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 2b40969c58a099f958c58909b666915991a42979 HEAD ); then
        _untag="true"
      fi
      if [ "$_hotfixes_no_confirm" != "ignore" ]; then
        warning "You have refused hotfixes. Due to regressions and refactoring upstream, the following features have been forcefully disabled: Esync, Fsync, Proton-rawinput, LAA, Protonify, native/builtin msvcrt, clock monotonic, plasma systray fix. If you want any of those features back, you need to accept all currently available hotfixes."
        read -rp "Press enter to continue anyway..."
      fi
      # Offer rebased josh-flat-theme patchset through userpatcher
      if [ "$_use_josh_flat_theme" = "true" ]; then
        if git merge-base --is-ancestor 6456973f0a64d326bb54da4675310caffc2588f1 HEAD; then
          _use_josh_flat_theme="false"
          ln -s "$_where"/wine-tkg-patches/misc/josh-flat-theme.patch "$_where"/josh-flat-theme.mypatch
        fi
      fi
    fi
  elif [ "$_use_esync" != "true" ] || ( [ "$_use_staging" = "true" ] && [ "$_staging_esync" != "true" ] ) && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 01150d7f8d27ad5efdb824da938c4a9fa562a036 HEAD ); then
    _broken_staging_44d1a45_localreverts="true"
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 2b40969c58a099f958c58909b666915991a42979 HEAD ); then
      _untag="true"
    fi
  fi
else
  # Rebase needed for that gap - disable for now
  if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2e42e7d996c7776e9c9473c578ffeddaa4df3244 HEAD && ! git merge-base --is-ancestor 4e2dc89043bbe3de177b293e994fe35dab889f6e HEAD ); then
    _sdl_joy_support="false"
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5fe103107a3bc72556e7909444df936ac20970ee HEAD && ! git merge-base --is-ancestor 2bd3c9703d3385820c1829a78ef71e7701d3a77a HEAD ); then
    _sdl_joy_support="false"
  fi

  # Staging 4e2dc89 breaks fs hack due to rawinput patchset disabling
  if [ "$_use_staging" = "false" ] || ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 0f972e2247932f255f131792724e4796b4b2b87a HEAD ) || ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 29d9659095fd76e303f204050ab4c85d0a0486e4 HEAD && cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor 661df7b889bb973721d09a316d87d200a31233fe HEAD ); then
    warning "Proton Fullscreen Hack is forcefully disabled on this revision. Please use either a 5.20 or lower base, or a wine staging 6.3 or newer base."
    _proton_fs_hack="false"
  elif [ "$_use_staging" = "true" ] && ( ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 0f972e2247932f255f131792724e4796b4b2b87a HEAD ) && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 29d9659095fd76e303f204050ab4c85d0a0486e4 HEAD ) ) || ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 661df7b889bb973721d09a316d87d200a31233fe HEAD ); then
    _FS_bypass_compositor_legacy="false"
    _proton_rawinput="false"

    if [ "$_proton_fs_hack" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 011fabb2c43d13402ea18b6ea7be3669b5e6c7a8 HEAD ); then
      # Using standard CRT memory allocators in the fs hack breaks, so let's selectively revert a27d5bae114eef5352b699ee38975bc8793b4dcb
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 007a4bc9b0f788f91125b692ea12ce23adf1eb21 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators5)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9c1d52dff463109cd91d5f1d0048bb9eb54efbb4 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators4)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 171fe51b794f51b8d2b3811b7327aa2e730cd07e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators3)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 187e4d7e2f50661ae626da3071996fe66a9b2e31 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators2)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 62cb6ace2cfe46358e6526868145a5bd8a7f990b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators1)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a27d5bae114eef5352b699ee38975bc8793b4dcb HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/free_invalid_size/winevulkan_Use_standard_CRT_memory_allocators0)
      fi
    fi
  fi

  # Looks like some want to use that nonetheless, so let's allow it - _ffxivlauncher_fix="false" # This seems useless currently as the ffxiv launcher works just fine with the legacy layout - which this patch was supposedly fixing before
  if [ "$_lol920_fix" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 7f144646ffac6f3632d0c39b217dbd433c1154a0 HEAD ); then
    warning "The _lol920_fix option breaks on your current tree and has been disabled. Please use _plain_version=\"de679af4\" or _staging_version=\"80498dd4\" in your .cfg to use this feature. Older commits than mentioned would also work."
    _lol920_fix="false"
  fi
fi

##

# Workaround broken staging commit 5117eec.
if ( cd "${srcdir}"/"${_stgsrcdir}" && [ "$(git rev-parse HEAD)" = "5117eec7bfbda434fbe72d19ba75ec23ddccf846" ] ); then
  warning "Temporarily restore deleted ntoskrnl-Stubs patchset to fix staging commit 5117eec trying to apply it"
  _hotfix_stagingreverts+=(5117eec7bfbda434fbe72d19ba75ec23ddccf846)
fi

# win32u moves broke some user32 interactions in fshack which I failed to fix so far - Revert for now
if [ "$_use_staging" = "true" ] && [ "$_proton_fs_hack" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 8fb1779241b02af85e920a0a7b944855126c4148 HEAD ); then
  # Staging
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 50067e77d56c05f3e301446f6046493140c32fdd HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts16)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 87212e802dcc1f3e4b5d91406efc1a9753dc0071 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts15)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9d853b7c44f2fbdd4c2b1b7a3c6c877f131f83ed HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts14)
  fi
  # Fixup
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 94f94f38433ccc78a36e626316dffc29f0bbf8c0 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/commit-25ac82d)
  fi
  # /Fixup
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 6b4b9f1b5a105b0baaac1c97e60cf184b561ceb9 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts13)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9e6939027d0e5e44abc299d14ac67c8ef62a9bf3 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts12)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2aab2d521a0c05e0554f19e98f37d95a1d0beaff HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts11)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor ccce92e0d3274ef43dcd8656358f73969a2fb3ce HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts10)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor cc4ecadad0872490aa43d3457be1ed42b8f64409 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts9)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 0b3309a201cfe65098e93f0f23af82509d1c6c72 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts8)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9ddf82d8603ac28626a732ab11db2f79c2e8f801 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts7)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 1e406a419666aa62d9ba76d42b5cc85ffce2a406 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts6)
  fi
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor f0719cee763b6cb381d276449bd5fef6aeaf0c7c HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts5)
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 8647380744a7c78a6818451918676d3ac86c6b86 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts4)
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2f728605b0281cbd7cb3ae92817827aed878cc2b HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts3)
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 3d32dd06263b797f6313100b128e8a54da9f0c57 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts2)
  else
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u_reverts)
  fi

  # Legacy
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 7ba3c31d84fcf49810aaf78aff63ef28b32eb159 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/remove_hooks_that_time_out-legacy)
  fi
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5bcb9d12631769e9d980151399f059805dc37dc3 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/user32.implement_rudimentary_EnableMouseInPointer_support)
  fi
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor dfd5f109fb4ebad859bf3ce3960b3b2b2ad1341d HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/winex11.drv_Add_a_GPU_for_each_Vulkan_device_that_was_not_tied_to_an_XRandR_provider-legacy)
  fi
  # /Legacy
  _hotfix_mainlinereverts+=(bd721f037144f8a9e31e841fd9c34c1662f5810b 6afcd71a82fdbbaf61f2e83ef1eeb9f50cc67642 56f1ed6a2a852376e0fbdecdbd7b332b26a6cf78 aa9072998fa3be07494a763fafe6a98e24edc593 ace09cf315dba49913eb3e2eec12e4d7b482885b e510f8650e843c7735675184f5b7a28be27dfc8a 1d337249f16ed61163315019f5dbbe4db3386390 3b06509f4697803e214d5c7ad11c56c1ec89adf9 d25c8c5770f99b29c05168855c368f7fe4583876 f7ac2c7833ceaa015501aef76b8f10f5fbd9cd92 fa9e9b5c562a6bd2263a06490e5bb047b72140aa 0e5ad562c51ef5f46fd3ada0d5d9920ed8bc747d bfa51809e44439586eb1cce1390162f17d3f164c 3c05f3b24704cb09389960b8c6ee584db9a61759 a37cae58d984b6d7e0c4c3de21f0b7cbef603ffd 0082d58cb5375a06ce33f431f6cf338e9c4b672b 1c01148696b164094b11624cee2985573744f83a 55bbe99c29264aeddec6932cb5e4fca03ecc9471 93543d9e6a3e2003a60dc9fa13ec3607a7817fcf c46630cd4bb49b5440521d7b277f831569e2afe8 286471a307792dc6662043ce36438a285cb506a4 ba8024bfcdb26d4a7eb8dc1ad53a3424d13df7e2 b8732c80b112af388264ac84d726aad09d93c8c6 535682cd79251c921121b0c87857a1f77cc27607 5ce53f95cf61cbd7f998ddc706a88cddb7a70c76 94a0823c4f6d419b6d868f8eba8977422f6cb074 ef8e4b7e3e32e2beb317411c5bd6e5cedf71cfb7 306ad4786d980b44785c6f1cb9f9c65f7fba2c56 eba0a510021ff8597536e83f67174ccf9283ad01 cad4adedaa92e3114eef34d7cdbb0bace548276d 3eb944c0a7a1b4857cb0b74d04a8450b636c98de 30c266a625286f264e65b1e205001f781e5d55c9 f1fb42ac4d4924beba3e5d48cf76132a2bbbaecc ea9fb81c0998222bf72d982494433c8a2d7149aa 357d8654c9fd128e801b7fa914dc635fc84d7b94 c38e287befdf1f2910d7e23ccff5638d57cd411d 172ae86945cb861d672cba37790e65782dac722f 99b94fcc743e17c1ba03c51ab3d53c6f99c5fad4 ea4353858d96235f362c5f94c9c5e0e83ad04edd 019313b63e9a4b70bae519675d1940f503e6f1a7 5e4dedff8e062fb21e0719ccbbbb5d5ca53cec75 079b0423b5b2fe321b8cae76c61c1bc47b24ac64 95378c56b8efa5bdd1822e317995bb096d0bd711 c5e7f1b0e5e34bfdb03c63e3ea07e7fdaa1543be ee405dd8b88683417af1e21ae6a254edadc32723 782220626fa7148d0d7421a5f7e632083a4b89f2 9015ae5978a15adb8e2fdd48824d08b3cf3680ed 19a2af27673271a464172fb8f115ca4f811325e2 d275253f5db5532f4778ae14344fe28ab2b88c54 0528f37fdd9b11cc95d074bb9e261d5127cb6ec3 12cb04fd2f13707e5b7eeed24f0ef916e71cd4fb db9b7b0f511197255d0cbe81605a42e34bf630d6 3e94864540fd1cd7dbd71f48a4c5e81a915357c0 356f37466fe1db8216c86c7a5bbe41876b07f196 aae54301207c1ce10f7f845c9ab6c5725036e2b2 29062759676e87551848de5b2787304d7f950b49 2425488ef66d774485ba3da9277fc9973c8a6669 f534e3f499dbee05352e155e43fbf9df0289d56f b8a2198d40de9bb3dd5c4aad7ae860602f4de3f5 95825139b8f65cb8dae843c2e6ed407024358729 9a320b39387d33e5a180b5db65cea05ce8ba4fe9 53978351a07cd81b38ed37e08f7c213d95cb79f7 fd83308b0b89dc560df77221dcd509bca336a323 83501c7eaabcff25373910b33b4e5c779b56f398 870d0080b04ee1789f2d71767c664ee3d834c502 6db4613be926171b747562b41f98527bdc414f91 80a4919b8a9749f07fdd9d27afde620383c4c36f b2bc410b7cc2966c24de69dfa16eb6830f8056b1 e395c161edf239bbe8055c2237857a44d2fe9b04 acfec2f94ce4e9bb778cc4830f164ac200894ad8 62e51da2cdb6bf033c6820db93002b68873aca93 35ac1b3f0700b3f6c1b8a9bbb87e9aad37ce3cc6 bed878dd2b88cff039b5659739e801606ee7df4b a2dcfd1d6d0e5715a4bbd30935b81454dd18def0 2c7b8e001111bb9e7bdf0189ca88d85883f6d90d a4d6198ac597b0cfd1f0a89ba71e12ea772352ce 72d53fda590126acb8cee72cb1fd208946d55d8c 6ea417b2d5a6c2d589578f1e9f958af64eb6f0fd 38bea949c02dd1116afc4c6d3df095490b803676 0efb4bb92808ac18ca27afedc04b936e69bf2cea 11a75a65d705bf1d732ec6e3f2ee904f54cbce9c 8b6a4584b80477f5dc43d71fe2dd16f7b1a135de 4104b19ade7532aba5645cb7410b4c6aebe45b8e 52ff3a3094f7a8e9d50cb0170d6d98714795c29a 0953de5cab03d4582ae4e5c900cec7bf7223a46d 262831bc63dca2d63171aa98d19e8f2566907dbc 21c37e8f957a8433e5bf78b0ff10b56959cbf22a dddb84433222c5623b295db6542b8944467c1288 55f4cf8c851cc156c5b77f9e333e4feed61387b6 523a6eba0250e734a30b9310ab694e2a2af6d6ca cfb6f9a1e82caa56eac9dccf7d7d0c0f3cd9a9a8 31dbce9675b6f2b25a4af5d4102fc36213838137 dae11519da7791bb0fe824111a65848816a31875 322ee7938386e0c96ba5423ba92a45520dda3f60 7f64eead50bc8e7a079a2a71986366d7fcad21e1 dcca04606e83c5c6df8abe5cc183d734bb99e1b5 6f1e48f4242f817ed04c8db6c162fbd296486f31 4f705f6f62185de6fa78b88b0aaec554a0fbf0de 5cc2d4adc5d183ed322b48bf3a7ec8359ef2abd5 d8db12a958ba312a517e7ade7f2c43428cdba600 63ad05bc02d2c56689559afaa71b2fe2cb6ef3c0 65ff9caca02af9544f3fc62c1e12fd90f6176af2 be8acff719ef4f0698a1ca845b35c0d430f92fd1 a94eab5acf5e9b9aaf47573713532d22f1f0b62d f6524f7a3a8048424071dcef3e367bac00a68599 1d0fbcc9d997b4d0adf5eeb8b467f54c9853d584 12a6f8d49b3defe6d25643db8a7d8fe838e042f2 c31954dfa7b026bc13960d3c8184ee94e1b4b05c d32d3b4f315ea20e3df655c79790323439521476 27cfcaa277764127a28368f8315f7c26cb326f7a b7f108ed9c91c91adf0f3ce0d5806b1c3e7625e0 6062065723c0d1f964ed1569a17cbe8fba01d9f4 22de82978eafef97b84248203503e284ca557783 d513eee3ee4e9107c0b433bf9182155022fdf8ee 5bcb9d12631769e9d980151399f059805dc37dc3 4072ba5d8a893df73cc1f3ce48f290d07643a109 e1db9fef05154f59f21d199a6a9691ae9c81144c 6062065723c0d1f964ed1569a17cbe8fba01d9f4 37de5d24a881e1830c672853e8e31a4844d3f52e b99778a531ed3dc2c5bb069d9351b0979c08414f 2c01eb392b0fd85a0b8c1be653a6356bee8e2942 980de6afe48b4b51e4e8c0af25f54e16a4eb219d d42888f07c6e3e491c99bb5c8b62b568264e990c 52eac01237c5e77d7c720731bc1844b196034edd 30cc496099705faaf282d5dbe66b27a75ba17b20 74da33b7914d191afff03637dda1d60ee09710ca dca49630a9caf34c85a576428a16f4091ac33ac8 177eb908c9433bd1b45c243d3b13e996711c1cd3 6ff2d287c2a74c7701e649218d3f4fc39014ab79 21d60952cb3a45c8c5dc0d88dab19ecdb1807570 7ba3c31d84fcf49810aaf78aff63ef28b32eb159 b666d908d5827e5b2ce2bd0c111b3297f4a6de2e 2a833a1c862e7ec421978540ad83aadc16cdda8a 2db1fea630887995ddef50bfe8bf1255188a8b76 dda4b573ead715b6091c988f8ffb87395a957ddb 58c4488626237bfddb2909983dee17348254061b 6badbee323cc4fbe884381d88a14041b1cd86f3d 2656d667a802a4264bb79dae6e56378ce0b807a5 e72d4630722db6e945b5c238019782e4b080879b f499b1a7abe92f54f4749f9f98981ada734b848a 27c0b997f0ed937536261f21856e071dd7e87ccd 0cfc7c445810c52622afa2b2635e0a23861df386 1e5dc840f7c36928cdcfb42736283d55afa62def c1a9b0b6a98faddf5b64ac99f3fed759b0199f46 6b3da8a4d8fe4d9cdb82e8c52c1548166c00bf5f 747f7b543ca777e4596a3f3f6811fcbec73a07f8 39ef9c3ad83e715611ebc2204ec09d83f3d5490f 8345d21b3a650bbc279989e05803b067db40ca55 8e3fef2627d0bfd6c7912fab77a794941518983c 44f667fa14c308b489be123c5ed6153010e8e430 d765edc411a6844f6322dd9da280aa0436391828)
  # winex11
  _hotfix_mainlinereverts+=(56b8a67f5af4aa68662a848715875fdb0b3d10d9 5ee6fcb30c26840afd6593379f4753a60d37404b 3a11be1d48251ecbc0b99d7f4b3325bddbcd486b b01bf347ad2a7799ccd94dfc8a22d7898204691c 37f31840b90f9de83052c7fe377b4f8c1d5daed2 4631b007c1149f7738d9ac39e5b4922cb7f9a742 df4ddc30b35fe96b0f571a715679c4baf98e43dd c3ed3403bae88f6a9fed26dd2fa0b622018cfd2a 91d6e8b4abe46a58a931c8b6ce0383bffa8f2566 bdbbc3467c24db07810e09f988c4498e7a8de3e2 1e2dd059e9537edb1cc50473e5d3959716abd713 50c74048853fa05f4b035317f11bb6b7001b8d22 824e9bddd583b7ace5b0a31d9f7a9dbec65d369a a3ebf88ad5da03a78b74b2a5a756b36eb29b6cb3)
  # staging
  _hotfix_stagingreverts+=(b54ac2f2b21284c7ddb0b7e1dca03ac242db423a 9e823e7f3e003d295f0e7948bf99ff700a386333 91cb025138745b32fdd399a6931bc5967b1e5ad5 d589a0bc4443fe7dcee56779b69bbb518278604d 7b5a66b852f71b161914e0cc7c2a52e29ed0ed96 5147239513e46eade22c4fafbf4c0b5e388574c7 fff59d624e2b3d647726f7c16a242014641d431d de2f0fee6f1f7070ef4454bd9d5c4c562b2509d2 1c911ccb630ae90a96e97176f7277d3c46e63898)
elif [ "$_proton_fs_hack" != "true" ] || [ "$_use_staging" != "true" ] && [ "$_protonify" = "true" ]; then
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 7ba3c31d84fcf49810aaf78aff63ef28b32eb159 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/remove_hooks_that_time_out)
  fi
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor b8732c80b112af388264ac84d726aad09d93c8c6 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u.implement_rudimentary_EnableMouseInPointer_support3)
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 2c7b8e001111bb9e7bdf0189ca88d85883f6d90d HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u.implement_rudimentary_EnableMouseInPointer_support2)
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5bcb9d12631769e9d980151399f059805dc37dc3 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/win32u.implement_rudimentary_EnableMouseInPointer_support)
  fi
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ef8e4b7e3e32e2beb317411c5bd6e5cedf71cfb7 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/winex11.drv_Add_a_GPU_for_each_Vulkan_device_that_was_not_tied_to_an_XRandR_provider)
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor dfd5f109fb4ebad859bf3ce3960b3b2b2ad1341d HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/winex11.drv_Add_a_GPU_for_each_Vulkan_device_that_was_not_tied_to_an_XRandR_provider-legacy)
  fi
fi

# 7b233f3032e4850b0f387faef4aae5ed6d5175de breaks at least Among Us - Revert - https://github.com/Frogging-Family/wine-tkg-git/issues/709
# Fixed along the way, possibly with 1b9d48a (not bisected)
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 7b233f3032e4850b0f387faef4aae5ed6d5175de HEAD && ! git merge-base --is-ancestor 1b9d48a7b01e2b715af46bc1f8d5fe6f1529782c HEAD ); then
  warning "Hotfix: Revert 7b233f3, allowing Among Us to run again"
  _hotfix_mainlinereverts+=(65f36a9695ae2050d7c3d7b01d066d5eb26e557b 7b233f3032e4850b0f387faef4aae5ed6d5175de)
fi

# Revert data-only mode switch for usp10.dll tzres.dll stdole2.tlb shdoclc.dll sfc.dll security.dll normaliz.dll msimsg.dll mshtml.tib mferror.dll lz32.dll light.msstyles icmp.dll activeds.tlb
# Else they are not getting loaded in Proton
if [ "$_EXTERNAL_INSTALL" = "proton" ]; then
  warning "Hotfix: Revert data-only mode switch for various dlls so they get properly loaded in Proton"
  _hotfix_mainlinereverts+=(141be028802f1675366802d49af01982525c2e6d d5fc074b9f2cf2e52711d832ca76eaaa5277bb8c 457c5df7d33144e45e0b275cf3cd060ec8403f32 5b7534e55adb59cddb7f0c8a337cc3c3954c8d8b aa957a2db15942260864c50865f828adeccc12e8 2abcdf08033334075a22e65b97a7f8874361e72a 40611a65e73eee2ff8ff8ff647572f93a7ffd4ba 9b6253199ffb361557c53b1315263518cebc9871 d3e2fa064f2efe0a9375df23ec141171b74efe40 1bb2d490f79743e9dac87d279e15f29bd359e715 3584dd2900fbd3a11175d1b3f77a55315442c284 2da8b64cfd5ed46f98d1fbfa5d56b680358a7a6b 91db4290caa0bc4f0173e72296852de2d7ad699d ace84eb6bccc490a563af19118da9e19ede970bb 91544ee3bb6c7cd2c056ae0d0eb626ade701d09f)
  if [ "$_use_staging" = "true" ]; then
    _staging_args+=(-W stdole32.tlb-SLTG_Typelib)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/oldtlb/stdole32.tlb)
  fi
fi

# Disable winesync / fastsync on known broken range
if [ "$_use_fastsync" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 751a3325a6ac93d11f08088c40b45a9ae05b52de HEAD ); then
  warning "Hotfix: Disable fastsync, known to be broken on your current tree, and enable esync/fsync as a fallback for the time being"
  _use_fastsync="false"
  if [ "$_use_staging" != "true" ]; then
    _use_esync="true"
  fi
  _use_fsync="true"
fi

# Revert a041075 which is breaking IDA Pro - https://bugs.winehq.org/show_bug.cgi?id=52252
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a041075cd2c26874757e0b6e1449c23c1326241c HEAD && ! git merge-base --is-ancestor e16ccaf05d845ea490d845d896cb284b5b00aa87 HEAD ); then
  warning "Hotfix: Revert a041075 which is breaking IDA Pro"
  _hotfix_mainlinereverts+=(a041075cd2c26874757e0b6e1449c23c1326241c)
fi

# Revert a9b5bb3 which is breaking graphics drivers
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a9b5bb326a1514e2c4185633ab34b22c9bbc9863 HEAD && ! git merge-base --is-ancestor 414e1c8ad5f5c39ef7caa71f5ff8f7735cf91d1a HEAD ); then
  warning "Hotfix: Revert a9b5bb3 which is breaking graphics drivers"
  _hotfix_mainlinereverts+=(a9b5bb326a1514e2c4185633ab34b22c9bbc9863)
fi

# Revert e5d3783 (winspool.drv: Implement Wow64 entry points in the Unix library. ) as it seems to prevent prefix creation on some machines
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor e5d37832ee66d011ba572a9b571e9fb44a7b2b4d HEAD && ! git merge-base --is-ancestor ff0f5e40249037c2456e43bf901633097d7ae430 HEAD ); then
  warning "Hotfix: Revert e5d3783, breaking prefix creation for some"
  _hotfix_mainlinereverts+=(e5d37832ee66d011ba572a9b571e9fb44a7b2b4d)
fi

# Disable vr support patchset for 5.20-6.12
if [ "$_EXTERNAL_INSTALL" = "proton" ]; then
  if [ "$_LOCAL_PRESET" != "valve" ] && [ "$_LOCAL_PRESET" != "valve-exp" ] && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 12d33d21d33788fd46898ea42e9592d33b6e7c8e HEAD ); then
    _steamvr_support="false"
    _proton_branch_exp="DENIED"
  else
    _steamvr_support="true"
    _proton_branch_exp="true"
  fi
fi

# Disable some staging patchsets breaking CEG in Proton
if [ "$_EXTERNAL_INSTALL" = "proton" ]; then
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 56a387bf1d80c76e69bd9015536dbe40b22f064d HEAD ); then
    _staging_args+=(-W ntdll-Junction_Points -W server-File_Permissions -W server-Stored_ACLs)
    if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 155e98e765990f33010035bd36f039cc6fca5ecd HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-155e98e)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 24753f8756ff982ee20cbb98bda79b15c8c3d57d HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-24753f8)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2056903cdfdc3580427edfb56f4058313c14ddf2 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-2056903)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 7655d14b6ad54f45e93c7c03fdc311b118b7a333 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-7655d14)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 68918863dcab756a407a58cf6b6869c21557e3d0 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-6891886)
    else
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-64a9d9f)
      #_hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_staging_CEG_support/commit-ac758de)
    fi
  fi
fi

# Staging rawinput fixup from openglfreak
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor c9c7130f3cc51c1861a5ef3e703fd442e8942ba4 HEAD && ! git merge-base --is-ancestor 56fd61a713174cc48a62a81b0a306acac93dd30c HEAD ); then
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/staging_rawinput/c9c7130-hotfix)
fi

# Staging rawinput restoration following 1295604addb472235256a847b644855693feeecd disabling it due to upstream changes
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 1295604addb472235256a847b644855693feeecd HEAD && ! git merge-base --is-ancestor c9c7130f3cc51c1861a5ef3e703fd442e8942ba4 HEAD ); then
  if ( [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ] ); then
    warning "Hotfix: Staging's mouse rawinput support patchset is currently disabled"
    read -rp "  Restore it?"$'\n> N/y : ' _hotfixansw_staging_rawinput;
  fi
  if [[ "$_hotfixansw_staging_rawinput" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ] && [ "$_hotfixansw_staging_rawinput" != "false" ]; then
    warning "Hotfix: Restore staging's mouse rawinput support patchset"
    _hotfix_mainlinereverts+=(f7ac9f309f2964e131c8e60c5ff3a878b67b2e32 dfa11dc040f93aceec7009eeb3a57b95764c1c64 da11387857f69d8bf68de56197390052f680f283 7bc5b6800e0a78ab744532b7ed28ee04d38110f3)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/staging_rawinput/staging_rawinput_restore)
  else
    warning "Disabling proton fs hack because it depends on staging rawinput"
    _proton_fs_hack="false"
  fi
fi

# Disable _prefer_external_faudio on 227a127+
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 227a1275b14a2ffd71a4d0c621cb655e3576ad02 HEAD ); then
  _prefer_external_faudio="false"
fi

# Staging mfplat restoration for 6.20 following feb91195ff12074276ea3b83047d4c8f2c70d738 disabling it
# Until we have a more robust solution upstream
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor feb91195ff12074276ea3b83047d4c8f2c70d738 HEAD ); then
  if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor a7508d54db6ef67b139fe15e964c644a304e30ce HEAD ) && ( cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor bcfed21ea1925e06c1f0db0e86cb2380300b8aa9 HEAD ); then
    if ( [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ] ); then
      warning "Hotfix: Staging's mfplat support patchset is currently disabled, breaking video playback in various games. Last commit with it is 05ea40b9366e4ee28a2baa461853b778230cbad1"
      read -rp "  Restore it?"$'\n> N/y : ' _hotfixansw_staging_mfplat;
    fi
    if [[ "$_hotfixansw_staging_mfplat" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ] && [ "$_hotfixansw_staging_mfplat" != "false" ]; then
      warning "Hotfix: Restore staging's mfplat support patchset"
      _hotfix_mainlinereverts+=(11d1e967b6be4e948ad49cc893e27150c220b02d 03d92af78a5000097b26560bba97320eb013441a 4d2a628dfe9e4aad9ba772854717253d0c6a7bb7 c5a9373dbed9bb53e7739dfb6d2a1a2a5818871b 78f916f598b4e0acadbda2c095058bf8a268eb72 4f58d8144c5c1d3b86e988f925de7eb02c848e6f 747905c674d521b61923a6cff1d630c85a74d065 f3624e2d642c4f5c1042d24a70273db4437fcef9 769057b9b281eaaba7ee438dedb7f922b0903472 639c04a5b4e1ffd1d8328f60af998185a04d0c50 54f825d237c1dcb0774fd3e3f4cfafb7c243aab5 cad38401bf091917396b24ad9c92091760cc696f 894e0712459ec2d48b1298724776134d2a966f66 42da77bbcfeae16b5f138ad3f2a3e3030ae0844b 2f7e7d284bddd27d98a17beca4da0b6525d72913 f4b3eb7efbe1d433d7dcf850430f99f0f0066347 72b3cb68a702284122a16cbcdd87a621c29bb7a8 a1a51f54dcb3863f9accfbf8c261407794d2bd13 3e0a9877eafef1f484987126cd453cc36cfdeb42 5d0858ee9887ef5b99e09912d4379880979ab974 d1662e4beb4c1b757423c71107f7ec115ade19f5 dab54bd849cd9f109d1a9d16cb171eddec39f2a1 3864d2355493cbadedf59f0c2ee7ad7a306fad5a fca2f6c12b187763eaae23ed4932d6d049a469c3 63fb4d8270d1db7a0034100db550f54e8d9859f1 25adac6ede88d835110be20de0164d28c2187977 dc1a1ae450f1119b1f5714ed99b6049343676293 aafbbdb8bcc9b668008038dc6fcfba028c4cc6f6 682093d0bdc24a55fcde37ca4f9cc9ed46c3c7df 21dc092b910f80616242761a00d8cdab2f8aa7bd d7175e265537ffd24dbf8fd3bcaaa1764db03e13 5306d0ff3c95e7b9b1c77fa2bb30b420d07879f7 00bc5eb73b95cbfe404fe18e1d0aadacc8ab4662 a855591fd29f1f47947459f8710b580a4f90ce3a 34d85311f33335d2babff3983bb96fb0ce9bae5b 42c82012c7ac992a98930011647482fc94c63a87 4398e8aba2d2c96ee209f59658c2aa6caf26687a c9f5903e5a315989d03d48e4a53291be48fd8d89 56dde41b6d91c589d861dca5d50ffa9f607da1db c3811e84617e409875957b3d0b43fc5be91f01f6 799c7704e8877fe2ee73391f9f2b8d39e222b8d5 399ccc032750e2658526fc70fa0bfee7995597df f7b45d419f94a6168e3d9a97fb2df21f448446f1 6cb1d1ec4ffa77bbc2223703b93033bd86730a60 7c02cd8cf8e1b97df8f8bfddfeba68d7c7b4f820 6f8d366b57e662981c68ba0bd29465f391167de9 74c2e9020f04b26e7ccf217d956ead740566e991 04d94e3c092bbbaee5ec1331930b11af58ced629 538b86bfc640ddcfd4d28b1e2660acdef0ce9b08 3b8579d8a570eeeaf0d4e0667e748d484df138aa 970c1bc49b804d0b7fa515292f27ac2fb4ef29e8 f26e0ba212e6164eb7535f472415334d1a9c9044 bc52edc19d8a45b9062d9568652403251872026e b3655b5be5f137281e8757db4e6985018b21c296 95ffc879882fdedaf9fdf40eb1c556a025ae5bfd 0dc309ef6ac54484d92f6558d6ca2f8e50eb28e2 25948222129fe48ac4c65a4cf093477d19d25f18 7f481ea05faf02914ecbc1932703e528511cce1a c45be242e5b6bc0a80796d65716ced8e0bc5fd41 d5154e7eea70a19fe528f0de6ebac0186651e0f3 d39747f450ad4356868f46cfda9a870347cce9dd 250f86b02389b2148471ad67bcc0775ff3b2c6ba 40ced5e054d1f16ce47161079c960ac839910cb7 8bd3c8bf5a9ea4765f791f1f78f60bcf7060eba6 87e4c289e46701c6f582e95c330eefb6fc5ec68a 51b6d45503e5849f28cce1a9aa9b7d3dba9de0fe c76418fbfd72e496c800aec28c5a1d713389287f 37e9f0eadae9f62ccae8919a92686695927e9274 dd182a924f89b948010ecc0d79f43aec83adfe65 4f10b95c8355c94e4c6f506322b80be7ae7aa174 4239f2acf77d9eaa8166628d25c1336c1599df33 3dd8eeeebdeec619570c764285bdcae82dee5868 831c6a88aab78db054beb42ca9562146b53963e7 2d0dc2d47ca6b2d4090dfe32efdba4f695b197ce)
      for _f in "$_where"/wine-tkg-patches/hotfixes/restore_staging_mfplat/mfplat-reverts/*; do
        _hotfixes+=("${_f%.myearlypatch}")
      done
      for _f in "$_where"/wine-tkg-patches/hotfixes/restore_staging_mfplat/mfplat-streaming-support/*; do
        _hotfixes+=("${_f%.myearlypatch}")
      done
    fi
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 05ea40b9366e4ee28a2baa461853b778230cbad1 HEAD ) && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 24e546779f4e0fa86b20fe0c4023b44f019fbd25 HEAD ); then
    if ( [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ] ); then
      warning "Hotfix: Staging's mfplat support patchset is currently disabled, breaking video playback in various games. Restoring it may break some games."
      read -rp "  Restore it?"$'\n> N/y : ' _hotfixansw_staging_mfplat;
    fi
    if [[ "$_hotfixansw_staging_mfplat" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ] && [ "$_hotfixansw_staging_mfplat" != "false" ]; then
      warning "Hotfix: Restore staging's mfplat support patchset"
      _hotfix_mainlinereverts+=(227a1275b14a2ffd71a4d0c621cb655e3576ad02 9196fee58349558593fd7edf4768b189c25f6293 aa867c6cfba48a63179088ec6381c73488853659 d2f653a854ccd17688813d6b7f585acbfb45b9ba a4be9e85687f7a8d7476ee3d3ced80eeec720f57 0c59cfc14e33a5706c1873151780d5b2dcc536ca 28c9c138d2658a4c3252a94d45a1e8b7ac28be7f 5144b27661fcd6705353d832e0383085f8afe842 7da1828c4927faec011d1c15d2f3f9bbb43435b7 4853f65c844de8277b8b0420df1a2cdb1c5b17c8 4dd187b2227767524825e51eddd14f206ffd03dd 0052ffbfa0e7672278b3d5fcdb767d604fa0f565 d84d9054f5466212e122fac70265eae841438764 34a55c7b96c97b178ea1ab519eb0e847096f2076 4d929972c341bff2da3616606b8cbeadf85dba26 f51b2ca8f7640dd0770a82c1e2c19caa65286eef f7a5bf7be1b43ff295723c15c296c94321e3a653)
      for _f in "$_where"/wine-tkg-patches/hotfixes/restore_staging_mfplat/mfplat-streaming-support-2/*; do
        _hotfixes+=("${_f%.myearlypatch}")
      done
      _prefer_external_faudio="true" # Bypass 227a127+ disabling external faudio for this hotfix
    fi
  fi
fi

# 6dcaff4 breaks childwindow patches (from fshack or standalone), so let's revert the changes for now
if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 548bc54bf396d74b5b928bf9be835272ddda1886 HEAD ); then
  if [ "$_proton_fs_hack" = "true" ] || [ "$_childwindow_fix" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 6dcaff421f87a93efe18b2efe0ec64d94ed1d483 HEAD ); then
  _hotfix_mainlinereverts+=(548bc54bf396d74b5b928bf9be835272ddda1886 b502a3e3c6b43ac3947d85ccc263e729ace917fa 963589ee296ae90003dab3e8204766ab4e4c0045 2adf4376d86119b8a6f7cde51c9a972564575bac 6dcaff421f87a93efe18b2efe0ec64d94ed1d483)
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/childwindow/staging-6dcaff42)
    if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4c51f4f5f6ddecd47a3121a8ce4228d4763892b4 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/childwindow/staging-4c51f4f)
    fi
  elif [ "$_protonify" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor b502a3e3c6b43ac3947d85ccc263e729ace917fa HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/childwindow/b502a3e-proton)
  fi
elif [ "$_proton_fs_hack" != "true" ] && [ "$_childwindow_fix" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 548bc54bf396d74b5b928bf9be835272ddda1886 HEAD ); then
  if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor d318f43559dbb0093e22bab1aa0eb9dc01170cc2 HEAD ); then
    warning "Hotfix: Standalone vulkan childwindow support disabled on this revision. Please enable fshack as a workaround."
    _childwindow_fix="false"
  elif [ "$_use_staging" = "false" ]; then
    warning "Hotfix: Standalone vulkan childwindow support disabled on this revision. Please enable staging as a workaround."
    _childwindow_fix="false"
  fi
elif ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 656edbb508d51cbe3155d856ee3f2c27a6cd4cba HEAD ); then
  if [ "$_proton_fs_hack" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9aef654392756aacdce6109ccbe21ba446ee4387 HEAD ); then
    _hotfix_mainlinereverts+=(ef9c0b3f691f6897f0acfd72af0a9ea020f0a0bf 3b8d7f7f036f3f4771284df97cce99d114fe42cb fe5e06185dfc828b5d3873fd1b28f29f15d7c627 6ef7cd4e3ae54d6ed09d85a2518e7e64d7f03573 c2384cf23378953b6960e7044a0e467944e8814a c3862f2a6121796814ae31913bfb0efeba565087 37be0989540cf84dd9336576577ae535f2b6bbb8 3661194f8e8146a594673ad3682290f10fa2c096 9aef654392756aacdce6109ccbe21ba446ee4387)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0004-winevulkan1)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/childwindow/staging-fa5989b)
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor f0cd33c69e879177559caaf248e86a4d69f9a09e HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/childwindow/f0cd33c)
    fi
  elif [ "$_proton_fs_hack" = "false" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9aef654392756aacdce6109ccbe21ba446ee4387 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0004-winevulkan2)
  fi
fi

# Revert d4259ac8e9326a8173d6f83f0d525c97b90a1da0 which breaks compiling the steam helper
if [ "$_EXTERNAL_INSTALL" = "proton" ]; then
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9ae627316d98b3a0399bd6b5c2257bd47d596bc6 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/mingw-msvcrt-steamhelper/d4259ac8e93)
  else
    _hotfix_mainlinereverts+=(d4259ac8e9326a8173d6f83f0d525c97b90a1da0)
  fi
fi

# LOL
if [ "$_use_staging" = "true" ] && [ "$_lol920_fix" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 7554bd4b41a1429517eb86fd20dbe813cdd0550a HEAD && cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor 766e1ee8f8876f21b64b3bbd5c9322a476abc5bd HEAD ); then
  warning "The _lol920_fix option breaks on 6.19+ and has been disabled. Please use 7.1 or newer (staging 7.0.r2 minimum)."
  _lol920_fix="false"
fi

# https://bugs.winehq.org/show_bug.cgi?id=51687 - https://bugs.winehq.org/attachment.cgi?id=70579&action=diff
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 8e2df64cf8979334618a3e2672d19cb9b891fa3f HEAD ); then
  warning "Hotfix: Fix for Riot Client updates"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/GetMappedFileName/Return_nt_filename_and_resolve_DOS_drive_path)
fi

# https://github.com/ValveSoftware/Proton/issues/4322#issuecomment-941632443 - 2c01333d03153a2d3cc2622fa18a9ad323dd9edb 7b17d7081512db52ef852705445762ac4016c29f
if [ "$_protonify" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 7b17d7081512db52ef852705445762ac4016c29f HEAD && ! git merge-base --is-ancestor 7c046c7afd4253daa9cd8dbb6b2f466f128fecc9 HEAD ); then
  warning "Hotfix: Fix for memset performance regression"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/memset/memset)
fi

# https://github.com/ValveSoftware/Proton/issues/1295#issuecomment-859185208
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 2ad44002da683634de768dbe49a0ba09c5f26f08 HEAD ); then
  if [ "$_use_staging" = "false" ] || ( [ "$_use_staging" = "true" ] && cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor bcfed21ea1925e06c1f0db0e86cb2380300b8aa9 HEAD ); then
    warning "Hotfix: Revert Quartz changes breaking Tokyo Xanadu Xe+"
    _hotfix_mainlinereverts+=(3c2e6efb5a6b077ccd6eac2190e16829882ee333 2ad44002da683634de768dbe49a0ba09c5f26f08 dfa4c07941322dbcad54507cd0acf271a6c719ab)
  fi
fi

# bcrypt fixes for RDR2
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 2ad44002da683634de768dbe49a0ba09c5f26f08 HEAD ); then
  warning "Hotfix: Bcrypt fixes for RDR2"
  if [ "$_proton_bcrypt" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 37e000145f07c4ec6f48fdac5969bbbb05435d52 HEAD ) && grep -Fxq 'Disabled: true' "${srcdir}/${_stgsrcdir}/patches/bcrypt-ECDHSecretAgreement/definition"; then
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ef6e33f89f94e1fc109bb6c415d7c80f141619d5 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/ef6e33f)
    else
      _hotfix_mainlinereverts+=(341cb1a933aec7b2858414f571ea98ba29caa72a)
    fi
    _hotfix_mainlinereverts+=(48075d2a0874d368e617632bd5e875e4bc18c411 1fa5bfd7dab270113c8fd2b48c838396719c639b 5b860a44a0051cf779ec3391610a807e711d184f 00dfa1bd04ae7f93ee7dd4235dd2439697efd318 777cbf06d2e8db298313982b7823acbc40dc05db b352d353b41654ad2b94d46747c5d203acc417f3 0c2408464cfea0d3e5b073c56ac0d264d1abe576 c1ed9ca9b18267b2139fcf7fd68f24d2c6d7a2a3 9176251af425ba494c0334c5659aa47941ee7c85 f3d4df60ff4afbf1983387a098ae96830384f53a)
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 045f50a78a210cc16e25ebffa276003ae69e1994 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0001-proton-bcrypt_rdr2_fixes4)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ab4edfd8621d4811ce9a74d066eef0904a45a74f HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0001-proton-bcrypt_rdr2_fixes3)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor fcc827d141f32954545b349f06b01a3909b95ac0 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0001-proton-bcrypt_rdr2_fixes2)
    else
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0001-proton-bcrypt_rdr2_fixes)
    fi
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0002-bcrypt-Add-support-for-calculating-secret-ecc-keys)
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 39336fd02d90b8d7d1d24d5eb31f9b0172b60a17 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0003-bcrypt-Add-support-for-OAEP-padded-asymmetric-key-de2)
    else
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/rdr2/0003-bcrypt-Add-support-for-OAEP-padded-asymmetric-key-de)
    fi
  fi
fi

# Broken ranges on mainline
if [ "$_use_staging" = "false" ]; then
  # 5.20-5.21
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 6373792eec0f122295723cae77b0115e6c96c3e4 HEAD && ! git merge-base --is-ancestor bedfb9cae224a369efa4588332a5518dbee57035 HEAD ); then
    _use_esync="false"
  # 6.0
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 477fe4ba2fceaffe96ea3910595befeb22b717a5 HEAD && ! git merge-base --is-ancestor 47ac628b4a4e476c1b044765c95d5be2a7101d14 HEAD ); then
    _use_fsync="false"
  fi
fi

# Add Rmi's pending fixes for hidclass - https://source.winehq.org/patches/data/215195 - https://source.winehq.org/patches/data/215197
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor afd63fa6a75cfabac450c42a3e9ccd78596b7728 HEAD && ! git merge-base --is-ancestor 9421dd2b3cd7114bf390c3ffcec30ab4bc95b7ef HEAD ); then
  warning "Hotfix: Add Rmi's fixes for gamepad handling on 6.18 release"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/hid_Remi_6.18release/215195)
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/hid_Remi_6.18release/215197)
fi

# Revert 1c1ff37 and fbd39cd, breaking a proton patch needed for RE8 - Needs rebase/re-implementation
# Disable on d94d1a8+ for now, along with the RE8 patch
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor fbd39cd8b5de10c53fbb6c5e298c8863beec13fd HEAD && ! git merge-base --is-ancestor d94d1a8b263a020575bf8dd76509d9e603434095 HEAD ); then
  warning "Hotfix: Revert some gdi changes to allow for RE8 proton patch"
  _hotfix_mainlinereverts+=(072a100f66215763a67edc4629fe5d3b73f6734c 951d8ace18c5677d7bc577a08c69a1c1af8bf2d1 c33b7b583b4067639ce8e4bbea2965cb2bf091de 05a3384ca8186404280085da1d1744da474a60d7 5794b2da18328ea22464b70cd243d279a236df7d 75d21c999e39cf5c1b3feb6e2c50cdc30a077325 ef7b2a1b8bf3cfdd29051da248fa3c2060800271 800cde3cf4bffa3a2909e5ae00326db6eb1b42b1 711ce415c01a5e36bde6bb147b5aa3cedc8b35ed 02d2bc944db2e5132e11a9ffdcad5f3f497b03fc b096da8a50210cb437376a2d65374e310d53eeff 8217ce0fef83a0aea3c658489c885d9bb69a3056 f95687c510e177d3c2b368e0181e9209aa2ac381 66fd792c4d16bb5815b5d796f119e7bf8d946fc1 34508690cb98f9d849cc04817db77400c62513c4 00359ebfa0d4a86aac024f4067a82bb5725c94b4 7da78fd269309cfa8ed27aededb2c67e24507439 8a68a9ee3193149c3f8825c31af7d5a6480f4ee4 865be24a2516518250badb5325220eacff2a126f 931ea8b00e82912a96446575371e105cf1399496 f6e584e626523d2500f094f1e98f113018770c5f b2522bfb90e23ed84d1ec2dc03069a28d937b32f 011032164040ac36370249655addb300baec1b78 55849cd42808e54e1a63ef0de4db05640065a968 9c03e8ae8c0f81e70528bc7719fba5196ea7949e e4bb7972525ae855865c54a7f87955cb74b123c5 91621cece6154356bfbe8934759c355abea9a074 86f11f71a04fa27f3e52366a131810d945749c0e 1c1ff37390c94101f474ce8ee57a3bd830ca965f fbd39cd8b5de10c53fbb6c5e298c8863beec13fd)
fi

# Disable proton sdl joy patchset until we rebase it
# Edit - Rebased as of proton_7.0, targetting 656edbb508d51cbe3155d856ee3f2c27a6cd4cba
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 199f689ff1e0f7c7fe318c2273aa378710a94e78 HEAD && ! git merge-base --is-ancestor 656edbb508d51cbe3155d856ee3f2c27a6cd4cba HEAD ); then
  _sdl_joy_support="false"
fi

# Rockstar Game Services are broken with the 8e13903-4c10543 patch series - Revert for now
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 8e13903665fdf81fcd6054fb3de981d5a3f617f1 HEAD && ! git merge-base --is-ancestor beb844448731a2413e3700877c237dc9f5968870 HEAD ); then
  warning "Hotfix: Fix Rockstar Game Services broken by 8e13903-4c10543"
  _hotfix_mainlinereverts+=(4c10543b6a54cdcc57b5ce7efd839b17d60471e6 67c8a82f3d0a43709a3be622dbe15a5ff8165475 2f3ab0b242321a044ca68794f811165a8f748a74 4c7c7d07d4dd30b0751c7ad0bbc1db5577807b72 0978421102910d7a7443f9f57ea0bfe3c882270e 8e13903665fdf81fcd6054fb3de981d5a3f617f1)
fi

# EGS and RGS login is broken with 5edf656 - Revert for now
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5edf65616a8dcbf5988bbabe0493827d9e125fc3 HEAD && ! git merge-base --is-ancestor 0342de8e4d8a646d2b858cccdbf95bf68c6b32b0 HEAD ); then
  warning "Hotfix: 5edf656 breaks EGS and RGS - Reverting to fix"
  _hotfix_mainlinereverts+=(5edf65616a8dcbf5988bbabe0493827d9e125fc3)
fi

# Sea of thieves got broken by b8aaf86 - https://bugs.winehq.org/show_bug.cgi?id=51440
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor b8aaf86b2dbb8ecb3f7094cc40a0df89bb2add27 HEAD && ! git merge-base --is-ancestor 8ed81720e81b20a134d9cd5c6bb50183752d9e82 HEAD ); then
  warning "Hotfix: b8aaf86 breaks Sea of Thieves - Reverting to fix"
  _hotfix_mainlinereverts+=(b8aaf86b2dbb8ecb3f7094cc40a0df89bb2add27)
fi

# Staging's winepulse pulseaudio support patchset was disabled with 0df3e89, leading to audio skips, crackling and friends in some games such as Cyberpunk 2077 and Forza Horizon 4. Let's bring it back for now to get better sound.
if [ "$_use_staging" = "true" ] && [ "$_staging_pulse_disable" = "false" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 0df3e892fb1f3c72c865e65ca2f1adc947ce83e0 HEAD && ! git merge-base --is-ancestor 93e94fcbc077db4243eec763ed91d6e8312add29 HEAD ); then
  if ( [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ] ); then
    warning "Hotfix: Staging's winepulse pulseaudio support patchset is currently disabled, leading to audio skips and crackling in various games."
    read -rp "  Restore it?"$'\n> N/y : ' _hotfixansw_staging_pulse;
  fi
  if [[ "$_hotfixansw_staging_pulse" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ] && [ "$_hotfixansw_staging_pulse" != "false" ]; then
    warning "Hotfix: Restore staging's winepulse pulsaudio support patchset - Fixes audio skips and crackling in various games"
    if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 847db3c1d3f5444808814cbea8f2920b16a96fcb HEAD ); then
      _hotfix_mainlinereverts+=(e309bad98c736d3409b5ceaffa77486a73c1f80b 7d60d0d7bbc0138133d1968dc3802e2e79ab5b32 4303e753137d0b44cff4f9261d10ef86d57016f2 2e64d91428757eaa88475b49bf50922cda603b59 f77af3dd6324fadaf153062d77b51f755f71faea ce151dd681fe5ee80daba96dce12e37d6846e152 77813eb7586779df0fb3b700000a17e339fd5ce3 d8e9621cfad50596378283704dfb1e6926d77ed8 a4149d53f734bf898087e22170eab5bed9a423d1 b4c7823bbb6a792098131f5572506784c8ed0f35 70f59eb179d6a1c1b4dbc9e0a45b5731cd260793 e19d97ff4e2f5a7800d6df77b8acce95130b84c3 4432b66e372caf0096df56f45502d7dea1f1800c 6a6296562f536ed10d221f0df43ef30bbd674cb2 aba40bd50a065b3ac913dbc1263c38535fb5d9e7 bf74f36350c92daae84623dc0bd0530c212bb908 1518e73b23211af738ae448a80466c0199f24419 44e4132489c28b429737be022f6d4044c5beab3e a6131544e87c554f70c21a04fb4697d8e1f508d5 80b996c53c767fef4614f097f14c310285d9c081 459e911b653c7519a335661a6c0b0894e86d2f1a 42d826bc8c1d625ed2985ff06c2cd047209a1916 30c17619e5401618122ca330cf0909f49b170a59 af84907ccad3e28f364ecfaa75ccb5fedf7f5a42 a5997bece730beb8ab72d66b824ed2a1cb92c254 24a7c33fc1ad6dbab489284cfb6dba4130297ddb 8cb88173d87efedce8c345beea05641f5617d857 505d4b8b14913f3abd362bf27272e6b239cb6ce4 638455136b4d30b853b02b77a2f33dc61c60b267 13cac6287c454146eff73aabc4b92b5c8f76d4df d7b957654d4739b8dd07c91f051b7940f416ef42 8ea23d0d44ced0ce7dadc9b2546cbc56f6bce364 0b0ae164f4ccebf4b5bc1bb1529a90786d2d5941 131b7fd5e16a3da17aed28e86933074c5d663d9f 8060e56b26add8eafffb211119798569ea3188ff bca0706f3a93fa0a57f4dbdc6ae541e8f25afb34 b1ddfca16e4696a52adf2bdd8333eeffb3c6170c a5d4079c8285c10ab2019c9fd9d19a6b22babb76 ebd344f2922f4044117904e024a0a87576a3eff1 0eeefec6c56084a0677403aee46493e2c03a1dca 5477f2b0156d16952a286dd0df148c2f60b71fe6 fa097243e06b3855a240c866a028add722025ead 8df72bade54d1ef7a6d9e79f20ee0a2697019c13 e264ec9c718eb66038221f8b533fc099927ed966 d3673fcb034348b708a5d8b8c65a746faaeec19d)
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor e309bad98c736d3409b5ceaffa77486a73c1f80b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/wine-pulseaudio-fixup)
      fi
    else
      _hotfix_mainlinereverts+=(6fa197c3ec60066256bd8b847cc79ff8f743c6b5 033cd6013ea9852244b8d58360554c964a7bb540 262c52110ccc50cdca001eebc8c2f5481b902506 6995b77a6d0111bba045ed1dafa348cc465bc5c8)
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a7ecf080406b76b64176505d1d2fc8abba837022 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-6)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5e0479c49704d161cde88fa8cf89c43179ebcb4b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-5)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ab5664a5e627731084f877626b251196a8aa726c HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-4)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 088a787a2cd45ea70e4439251a279260401e9287 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-3)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 18b98df060071aad16f6fab591ce6beb127b7f14 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-2)
      else
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/pulse_reverts-1)
      fi
    fi

    _hotfix_stagingreverts+=(183fd3e089b170d5b7405a80a23e81dc7c4dd682)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/staging-reenable-pulse)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/staging-pulseaudio-reverts)
  fi
elif [ "$_prefer_external_faudio" = "true" ]; then
  _hotfix_mainlinereverts+=(a80c5491600c00a54dfc8251a75706ce86d2a08f 22c26a2dde318b5b370fc269cab871e5a8bc4231)
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor d8be85863fedf6982944d06ebd1ce5904cb3d4e1 HEAD ); then
    if [ "$_use_staging" = "true" ] && cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 2239795e437a25561b626877feab278584d590c2 HEAD; then
      _staging_args+=(-W xactengine3_7-callbacks)
    fi
    warning "Hotfix: Prefer external FAudio for WMA playback"
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 111c87f444b167f56633462f778d9f5aa6ef53ea HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/f0cd33c-2)
    elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor f0cd33c69e879177559caaf248e86a4d69f9a09e HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/f0cd33c-1)
    fi
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/restore_staging_winepulse/d8be858)
  fi
fi

# Battle.net got broken by 414b31bc0bbbfe005e90a1946a649082dc303c55 - https://bugs.winehq.org/show_bug.cgi?id=51331
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 414b31bc0bbbfe005e90a1946a649082dc303c55 HEAD && ! git merge-base --is-ancestor 026b192018e254c74c6a1f07d82637716ff48e8d HEAD ); then
  warning "Hotfix: 414b31b breaks battle.net (agent crashes) - patch by Zebediah Figura"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/414b31b/zeb-fb3956f-fix)
fi

# Some games seem to spam checking for devices such as Samurai Shodown Reboot 2019 - Reverting c2c78a2 fixes it
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor c2c78a2fe0ac13e4fca7ab4c17977b65e358485c HEAD && ! git merge-base --is-ancestor  bedd92ca068434eea7cb6b445a3fcf21b51acbaf HEAD ); then
  warning "Hotfix: Revert c2c78a2 to prevent perf degradation on games polling devices constantly"
  _hotfix_mainlinereverts+=(c2c78a2fe0ac13e4fca7ab4c17977b65e358485c)
fi

# Wayland driver
if [ "$_wayland_driver" = "true" ]; then
  _configure_args64+=(--with-wayland --with-vulkan)
  _configure_args32+=(--with-wayland --with-vulkan)
fi

# https://bugs.winehq.org/show_bug.cgi?id=51277 - 97afac469fbe012e22acc1f1045c88b1004a241f seems to break - at least some - controllers on Unity games
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 97afac469fbe012e22acc1f1045c88b1004a241f HEAD && ! git merge-base --is-ancestor  bedd92ca068434eea7cb6b445a3fcf21b51acbaf HEAD ); then
  warning "Hotfix: Fix for gamepad not working in Unity games"
  _hotfix_mainlinereverts+=(97afac469fbe012e22acc1f1045c88b1004a241f)
fi

# There's apparently a regression caused by a891713f48fbcdae05f27f7e73b1cec78cf42644 and a70c5172c6bb0e61ad24c202a9bf4e88b8c868b0 regarding networking
#if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a70c5172c6bb0e61ad24c202a9bf4e88b8c868b0 HEAD ); then
#  warning "Hotfix: Fix for networking regression on a70c517+"
#  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/a70c517/networking_fix)
#fi

# 737fe1f introduced a regression for some, resulting in high CPU usage due to network handling. Workaround by openglfreak for a757701+ - https://github.com/Frogging-Family/wine-tkg-git/issues/407
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 737fe1f99337ab999cf67fb1acdf96f70020b3d4 HEAD && ! git merge-base --is-ancestor 361435f6095f8c759979600b06ed28785e7b3aec HEAD ); then
  if ( [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ] ) || [ "$_EXTERNAL_INSTALL" = "proton" ]; then
    msg2 ""
    warning "Hotfix: 737fe1f can lead to high CPU usage for some due to network handling regression. Reverting it fixes the issue but breaks some CEF apps/launchers."
    msg2 "  1 - Keep using upstream code"
    msg2 "  2 - Revert it (breaks some CEF apps/launchers)"
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a7577014faeda217be282222e355c493064e139b HEAD ); then
      warning "Alternatively, a workaround by openglfreak is offered on your current tree revision, which works in most cases (but not all) and doesn't break CEF apps/launchers."
      msg2 "  3 - Apply Openglfreak's patch (recommended)"
      read -rp '  > [1-3] : ' _hotfixansw_737f;
    else
      read -rp '  > [1-2] : ' _hotfixansw_737f;
    fi
  fi
  if [ "$_hotfixansw_737f" != "1" ] && [ "$_hotfixansw_737f" != "2" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a7577014faeda217be282222e355c493064e139b HEAD ); then
    warning "Hotfix: Fix for high CPU usage due to network handling regression - Patch by openglfreak"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/wineserver_socket_spin/wineserver-socket-spin-workaround)
  elif [ "$_hotfixansw_737f" = "2" ]; then
    warning "Hotfix: Fix for high CPU usage due to network handling regression - Breaks some CEF apps/launchers"
    _hotfix_mainlinereverts+=(737fe1f99337ab999cf67fb1acdf96f70020b3d4)
  fi
fi

# https://bugs.winehq.org/show_bug.cgi?id=51262 - 32-bit apps are broken by 308a5e7c4d01525184b057058949c68c0ee77dba - Fix by Zebediah Figura
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 308a5e7c4d01525184b057058949c68c0ee77dba HEAD && ! git merge-base --is-ancestor 79c102d6bec81b79e10290f23e9ac3816da6b58f HEAD ); then
  warning "Hotfix: Fix for 32-bit programs not starting since 308a5e7"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/308a5e7c/ntdll_reserve_space_for_the_whole_64-bit_YMM_context)
fi

# https://bugs.winehq.org/show_bug.cgi?id=51222#c2 - Multiple games have rendering issues caused by import of logf from musl (Kingdom Come: Deliverance, Just Cause 4, Wizard101)
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 51a253d25a65be68f25d20844548d8272ee0a5c4 HEAD && ! git merge-base --is-ancestor 673815e0edb7a3a505b8a8b39a79f97c8ce8fc32 HEAD ); then
  warning "Hotfix: Fix multiple games having rendering issues (Kingdom Come: Deliverance, Just Cause 4, Wizard101) - Patch by Piotr Caban"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/logf/msvcrt_Fix_logf_implementation)
fi

# fshack breakers - revert until fixed
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor fb8ab5e9d079474e07d753341393c0c1bfe32ddd HEAD && ! git merge-base --is-ancestor 9561af9a7d8d77e2f98341e278c842226cae47ed HEAD ) && [ "$_proton_fs_hack" = "true" ]; then
  _hotfix_mainlinereverts+=(a76fd1c312bfdff33774e361660f7fd29041099f 961d611baf0bfe0dd087aebb1d7efad2e98a6f0b 8f2f1f83c38c5792aac4105624ff60a313e95ef2 fb8ab5e9d079474e07d753341393c0c1bfe32ddd)
fi

# staging fs hack addition
if ( [ "$_EXTERNAL_INSTALL" = "proton" ] && [ "$_use_staging" = "true" ] || [ "$_proton_fs_hack" = "true" ] ) && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 76f8eb15f17ff9ae52f6c2b61824978762d421ef HEAD ) && [ -e "${srcdir}/${_stgsrcdir}/patches/imm32-com-initialization/definition" ] && ! grep -Fxq 'Disabled: true' "${srcdir}/${_stgsrcdir}/patches/imm32-com-initialization/definition"; then
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/proton_fs_hack_staging/imm32-com-initialization_no_net_active_window)
fi

# mfplat reverts
#_hotfix_mainlinereverts+=(abd3e8f3ec755eb3f09ab5333781b0daebe8f123 20a1eb3b252b404bd2ed9a11dc03312ea11fff0d e4e319d032d74ce5be55a31ef3add629b257ea48 626438a6be2df298c527870c8df9e6deb2f1c0fc)

# Revert 789c1db1, which breaks -at least- The Witcher 3
if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 1722615b06cba2f04fcd0ca69bbc33d963fb143f HEAD ); then
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 9561af9a7d8d77e2f98341e278c842226cae47ed HEAD ); then
    warning "Hotfix: Fix The Witcher 3, Borderlands 3, Nioh 2 crashing since 789c1db1 - Patch by Rmi Bernon"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/the_witcher_iii/virtual_alloc_remi2)
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 6de7fa1bde015d8c6d1743dec7c04a9f5652e788 HEAD ); then
    warning "Hotfix: Fix The Witcher 3, Borderlands 3, Nioh 2 crashing since 789c1db1 - Patch by Rmi Bernon"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/the_witcher_iii/virtual_alloc_remi)
  elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 789c1db18a4e192425da3771cac4726cda77130b HEAD ); then
    warning "Hotfix: Revert 789c1db1 as it breaks -at least- The Witcher 3"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/the_witcher_iii/revert_789c1db1)
  fi
fi

# 4f787812999b3b26f04b322fa0d78724596878c0 breaks building steam_helper with winegcc due to local stdlib.h
if [ "$_EXTERNAL_INSTALL" = "proton" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 4f787812999b3b26f04b322fa0d78724596878c0 HEAD && ! git merge-base --is-ancestor 5a1d836def24043b4e7afcdc8cf1342223957edf HEAD ) ; then
  warning "Hotfix: Fix Proton steam_helper headers lookup with winegcc"
  _hotfix_mainlinereverts+=(4f787812999b3b26f04b322fa0d78724596878c0)
fi

# Die start.exe die
#if [ "$_EXTERNAL_INSTALL" = "proton" ] && [ "$_proton_use_steamhelper" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 15a6ee944049bc15110b2219721a49b1afc268f9 HEAD ); then
#  warning "Hotfix: Fix for games not gracefully exiting in steam"
#  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/die_start.exe_die/start.exe_fatality)
#fi

# Selective reverts to fix steamclient swap on proton
if (cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor ba74c5c6984bb19aade5ae0dfaa71b0f77d5786e HEAD ); then
  if [ "$_use_staging" = "true" ] && [ "$_EXTERNAL_INSTALL" = "proton" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor be3928a8091e36197bc9894c4a09f13cf5459138 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/staging-server-default-integrity)
  fi
  if [ "$_EXTERNAL_INSTALL" = "proton" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor bb065801a693e1cd305d2a507c206f1b21a142d3 HEAD ); then
    warning "Hotfix: Fix for steamclient swap breakage"
    # steam_helper broke with 4e8fcc4 - Restore __wine_make_process_system to make it happy
    if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 4e8fcc41ca42f7e047e4a5cb708a75447a753143 HEAD ); then
      if (cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ba74c5c6984bb19aade5ae0dfaa71b0f77d5786e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker15)
      elif ( [ "$_use_staging" = "true" ] && [ "$_protonify" = "true" ] && cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5c009c17b3a212c3f5b0034c465077c0c593daae HEAD && ! git merge-base --is-ancestor 20fff538c49c87abffd583f6b63371592ebdd835 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker14-proton)
      else
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker14)
      fi
      # Add __wine_make_process_system syscall to ntdll loader array following ea6308e364b669adfcb8b1e448c8b08d715bcf6d
      if (cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ea6308e364b669adfcb8b1e448c8b08d715bcf6d HEAD ); then
        if [ "$_large_address_aware" = "true" ]; then
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/add_syscall_to_loader_array)
        else
          _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/add_syscall_to_loader_array-noLAA)
        fi
      fi
    fi
    if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 9561af9a7d8d77e2f98341e278c842226cae47ed HEAD ); then
      if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 78cbc269572b4a7e5e7cfcf4e063a023fcff2cba HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker13)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 1e5eee0fc318459d7ef071998e8ed05f2530d2c3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker12)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 5ba8f0d73b27e5df7ce40c0413743cb917405d0e HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker11)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 4dca2cc797c9951531257d9bd69f8c24c71b6c2b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker10)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor e9bc48e90a7f31820e3c1171cc6bbdc13a650b8f HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker9)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor d47a711e986342a0f6b9fe520f2a34378877cd61 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker8)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 620c0818bfa4554ee6d44ec2433c25ece598746b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker7)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 893febda143ccf4e4499d411fd28ab2f225aea09 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker6)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor aaa501fe93fb7140b472850060d652613406307f HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker5)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 277a5728da6cdce0247521dc63b324e120b542d6 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker4)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 0bbbf016b1eb1c90a98c58afc2760319050a04d3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker3)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 42de71c38780931c510ada6d7ee8681c99bbc60b HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker2)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor f55f0b8448b6810f583784235d809bdbb10b2d6d HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker1)
      elif ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor bb065801a693e1cd305d2a507c206f1b21a142d3 HEAD ); then
        _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/steamclient_swap/revert_steamclient_breaker0)
      fi
    fi
  fi
  _no_loader_array="true"
fi

# Protonify the staging syscall emu patchset
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 4de079bb7247c8b849558c0f27a280a9546c5570 HEAD ); then
  if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 66c0fdc1590e00ce471a6c55f4d97ededd1f5aae HEAD ); then
    warning "Hotfix: Protonify staging syscall emu"
    if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 9937bf04635e33efa0d32e6e5af3a2bb55ad8f9c HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-009)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 0ee2ac8499bbde23ad14bb0ffe125016faccd301 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-008)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor feb91195ff12074276ea3b83047d4c8f2c70d738 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-007)
    elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 24319dc308046ed520dd2cb92f57d54f96ebec21 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-006)
    else
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-005)
    fi
    # The rdr2 patch needs to be applied before the quake champions patch, so let's inject into $_where dir with a check in prepare script
    ln -s "$_where"/wine-tkg-patches/hotfixes/syscall_emu/rdr2.patch "$_where"/rdr2.patch
    ln -s "$_where"/wine-tkg-patches/hotfixes/syscall_emu/rdr2.patch "$srcdir"/rdr2.patch
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 6f3825b11f8444e87ff203f305debab81858f97d HEAD ); then
    warning "Hotfix: Protonify staging syscall emu"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-004)
    # Along with rdr2 patch, we need the ntdll-Syscall_Emulation patchset re-enabled for the quake champions fix
    _quake_champions_fix="false"
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 876024f44fde737fcf43e8b0cb8e75575e65d449 HEAD ); then
    warning "Hotfix: Protonify staging syscall emu"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-003)
  elif ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor e3cca687befffb4baee144dcd55f01a3204176eb HEAD ); then
    warning "Hotfix: Protonify staging syscall emu"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-002)
  else
    warning "Hotfix: Protonify staging syscall emu"
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/syscall_emu/protonify_stg_syscall_emu-001)
  fi
fi

# We prefer built-in vulkan-1 since native can break some games shipping it, so revert 290c9a4d6372cee046768eccd8fa49050a294f68 so the proton patchset hack can be used
# This breaks RDR2 so we skip doing that on 2cb4bdb+, which corresponds to the current proton-tkg meta patchsets at the time of writing this, allowing this change on earlier trees
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 290c9a4d6372cee046768eccd8fa49050a294f68 HEAD && ! git merge-base --is-ancestor 2cb4bdb10abcfd751d4d1b2ca7780c778166608a HEAD ); then
  warning "Hotfix: Restore prefer builtin vulkan-1"
  _hotfix_mainlinereverts+=(e5cade0ff189c7bc871cf3686d16c55939d06068 290c9a4d6372cee046768eccd8fa49050a294f68)
fi

# Fix steamhelper breaking with 0c19e2e
if [ "$_proton_use_steamhelper" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 0c19e2e487d36a89531daf4897c0b6390d82a843 HEAD ) && ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor 27040a4f009f1e35a540882dc150d14431de64a8 HEAD ); then
  warning "Hotfix: Fix for steam-helper breakage"
  _hotfix_mainlinereverts+=(4a1bd593f39b0852ca8fccbf0e54f7c00b3783ec 0c19e2e487d36a89531daf4897c0b6390d82a843)
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/shell32-Progress_Dialog/shell32-Progress_Dialog-staging-41e1551)
fi

# Multiple games making use of mfplat broke with 1fceb1213992b79aa7f1a5dc0a72ab3756ee524d
# Prevent crashing in multiple affected games with Derek's implementation: https://raw.githubusercontent.com/wine-staging/wine-staging/0ae7315541c8847d902c9e458a928c4df5520ba6/patches/mfplat-streaming-support/0033-HACK-Switch-between-all-selection-streams-on-MF_SOUR.patch
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 41e15516bde2e7c96fdb229c17140bf52fb05403 HEAD ) && ( cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor 09fdb3b5c97df1b96389f8070fd791560ec670b4 HEAD ); then
  warning "Hotfix: Fix for mfplat breakage in some games"
  _hotfix_mainlinereverts+=(a67d7c15336ea5caa89099952da1fc1998188029 a0a6fad695d2f9d1eb2601725ac27c9a9949026b beb9c6578ad8e21eb4b34366dbc3dff8b8c2ae5d cf4fe13a41b7cc0a624da7741ae528ef21032736 1fceb1213992b79aa7f1a5dc0a72ab3756ee524d)
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/mfplat/mfplat-derek-hotfix)
elif [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 1fceb1213992b79aa7f1a5dc0a72ab3756ee524d HEAD ) && ( cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor 41e15516bde2e7c96fdb229c17140bf52fb05403 HEAD ); then
  warning "Hotfix: Fix for mfplat breakage in some games"
  _hotfix_mainlinereverts+=(1fceb1213992b79aa7f1a5dc0a72ab3756ee524d)
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/mfplat/mfplat-derek-hotfix)
fi

# Autoconf 2.70 fix for legacy trees - https://github.com/wine-mirror/wine/commit/d7645b67c350f7179a1eba749ec4524c74948d86
if ( cd "${srcdir}"/"${_winesrcdir}" && ! git merge-base --is-ancestor d7645b67c350f7179a1eba749ec4524c74948d86 HEAD ); then
  warning "Hotfix: Fix for legacy trees when using autoconf 2.70"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/autoconf-legacy-fix/autoconf-legacy-fix)
fi

# Frequent freezes with staging's ntdll-NtAlertThreadByThreadId patch - https://bugs.winehq.org/show_bug.cgi?id=50448#c15
# There is also a known perf regression which may or may not be improved by this hotfix
if [ "$_use_staging" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor dfddef9654d4a24642c61c287a93f22eb7a51e12 HEAD && ! git merge-base --is-ancestor f8ce6cbb21e09c80320514770c102a1a8e9cfde6 HEAD ) && [[ ! ${_staging_userargs[*]} =~ "ntdll-NtAlertThreadByThreadId" ]]; then
  warning "Hotfix: Fix for frequent freezes in some games with staging (when ntdll-NtAlertThreadByThreadId patch is enabled)"
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/dfddef96/zf_fix_dfddef96-1)
fi

# Sound regression - notably affecting Warframe - 370a538e to 6314a750
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 6314a75006d1cfb86c1fb3da71be037fe646437c HEAD && ! git merge-base --is-ancestor db87636c91e5dca657150361fa9aabfe62ddf38c HEAD ); then
  warning "Hotfix: Fix Warframe and Ghostrunner sound on win10 prefixes."
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor fa6d22b976214ff4dfb32b431500b4cd1f7610a0 HEAD ); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/370a538e/xact-179-fixup)
  else
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/370a538e/xact-revert-179)
  fi
fi

# Fixes a regression breaking mostly some game launchers such as Riot client or Minecraft dungeon launcher - https://bugs.winehq.org/show_bug.cgi?id=49990
# It seems to break riot client on 6.15 while star citizen launcher works fine with and without it, so let's disable on 6.15+
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor bd27af974a21085cd0dc78b37b715bbcc3cfab69 HEAD && ! git merge-base --is-ancestor 548bc54bf396d74b5b928bf9be835272ddda1886 HEAD ); then
  warning "Hotfix: Revert bd27af97 to fix many game launchers displaying empty windows (StarCitizen, EGS, Riot Client, Minecraft Dungeons etc.)"
  _hotfix_mainlinereverts+=(b54199101fd307199c481709d4b1358ba4bcce58 dedda40e5d7b5a3bcf67eea95145810da283d7d9 bd27af974a21085cd0dc78b37b715bbcc3cfab69)
  #_hotfixes+=("$_where"/wine-tkg-patches/hotfixes/bd27af9/bd27af9)
fi

# staging 99c296e1 fs hack fixup
if [ "$_use_staging" = "true" ] && [ "$_proton_fs_hack" = "true" ] && ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 99c296e10c08046e2712a55d576b6c41281db0cb HEAD ) && ( cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor 364ce82bd13540b181959837c1e235040f58b428 HEAD ); then
  _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/01150d7f/x11drv1)
fi

# DXGIGetDebugInterface1 TRACE try to read values memory address of parameters, but those are not always memory addresses.
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor 08cccb522f19b3dc5b397f7c1c519604b601cee0 HEAD); then
  warning "Hotfix: Remove a TRACE in the DXGIGetDebugInterface1 stub causing segfaults."
  if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor a608ef1f2d9db962bcf2f47bc026144c0148ed41 HEAD); then
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/08cccb5/a608ef1)
  else
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/08cccb5/08cccb5)
  fi
fi

# WINEDEBUG crash - legacy
if ( cd "${srcdir}"/"${_winesrcdir}" && git merge-base --is-ancestor ca13f489e18fb1f7944e3bdcfdfc4a810bf80994 HEAD ) && ( cd "${srcdir}"/"${_stgsrcdir}" && ! git merge-base --is-ancestor a1bda115af8ad3484b7c17eac7da74e4906fa9e4 HEAD ); then
  if [ "$_hotfixes_no_confirm" != "true" ] && [ "$_hotfixes_no_confirm" != "ignore" ]; then
    warning "Hotfix: Upstream commits cd215bb to ca13f48 are interacting badly with WINEDEBUG env var and break staging."
    read -rp "Are you okay to revert them ?"$'\n> N/y : ' _hotfixansw;
  fi
  if [[ "$_hotfixansw" =~ [yY] ]] || [ "$_hotfixes_no_confirm" = "true" ]; then
    _hotfix_mainlinereverts=(cd215bb49bc240cdce5415c80264f8daa557636a 8ca9e0b1abba7640e288df7b55b60903bc52fc9d 6a1667fab428764eeaba38ac9b5cb1813c5cffda 9b12068c6c8ba656e8ca768227b1a970877d4730 cc5953048e570155deb791b9e9e738a0508c2032 0936606c383744daa8be046db72e8e888522ce21 ca13f489e18fb1f7944e3bdcfdfc4a810bf80994)
    _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/a1bda115/acd209d6039f2492bdc8aca3d15bb1b268b04f1a)
    # Staging conflict
    if ( cd "${srcdir}"/"${_stgsrcdir}" && git merge-base --is-ancestor 4501d49149e37b37edd61f8a1694930db7418a61 HEAD ); then
      _hotfixes+=("$_where"/wine-tkg-patches/hotfixes/a1bda115/4501d49149e37b37edd61f8a1694930db7418a61)
    fi
  fi
fi

hotfixer() {
  for _f in "${_hotfixes[@]}"; do
    if [ -e "${_f}.${_userpatch_ext}revert" ]; then
      msg2 "## Applying reverting hotfix for ${_userpatch_target}: ${_f##*/}.${_userpatch_ext}revert"
      echo -e "\nApplying reverting hotfix ${_f##*/}.${_userpatch_ext}revert" >> "$_where"/prepare.log
      if ! patch -Np1 -R < "${_f}.${_userpatch_ext}revert" >> "$_where"/prepare.log; then
        error "Patch application has failed. The error was logged to $_where/prepare.log for your convenience."
        if [ -n "$_last_known_good_mainline" ] || [ -n "$_last_known_good_staging" ]; then
          msg2 "To use the last known good mainline version, please set _plain_version=\"$_last_known_good_mainline\" in your .cfg"
          msg2 "To use the last known good staging version, please set _staging_version=\"$_last_known_good_staging\" in your .cfg (requires _use_staging=\"true\")"
        fi
        exit 1
      fi
      echo "Applied reverting hotfix ${_f##*/}.${_userpatch_ext}revert" >> "$_where"/last_build_config.log
    fi
  done
  for _f in "${_hotfixes[@]}"; do
    if [ -e "${_f}.${_userpatch_ext}patch" ]; then
      msg2 "## Applying hotfix for ${_userpatch_target}: ${_f##*/}.${_userpatch_ext}patch"
      echo -e "\nApplying hotfix ${_f##*/}.${_userpatch_ext}patch" >> "$_where"/prepare.log
      if ! patch -Np1 < "${_f}.${_userpatch_ext}patch" >> "$_where"/prepare.log; then
        error "Patch application has failed. The error was logged to $_where/prepare.log for your convenience."
        if [ -n "$_last_known_good_mainline" ] || [ -n "$_last_known_good_staging" ]; then
          msg2 "To use the last known good mainline version, please set _plain_version=\"$_last_known_good_mainline\" in your .cfg"
          msg2 "To use the last known good staging version, please set _staging_version=\"$_last_known_good_staging\" in your .cfg (requires _use_staging=\"true\")"
        fi
        exit 1
      fi
      echo "Applied hotfix ${_f##*/}.${_userpatch_ext}patch" >> "$_where"/last_build_config.log
    fi
  done
}
